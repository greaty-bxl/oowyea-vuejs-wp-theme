(function(e){function t(t){for(var s,r,i=t[0],c=t[1],l=t[2],d=0,_=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&_.push(a[r][0]),a[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(_.length)_.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],s=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(s=!1)}s&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},a={app:0},o=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"07c7":function(e,t,n){},"0878":function(e,t,n){},"0923":function(e,t,n){"use strict";n("afe4")},"155d":function(e,t,n){"use strict";n("0878")},"346a":function(e,t,n){"use strict";n("f800")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("f2bf");function a(e,t,n,a,o,r){var i=Object(s["p"])("OwyTemplates"),c=Object(s["p"])("Grapes"),l=Object(s["p"])("OwyCode"),u=Object(s["p"])("OwyShortcuts"),d=Object(s["p"])("OwyChatBuilder"),_=Object(s["p"])("OwyOptions"),p=Object(s["p"])("OwyDocs");return Object(s["j"])(),Object(s["c"])(s["a"],null,[Object(s["f"])(i),Object(s["f"])(c,{ref:"grapes"},null,512),Object(s["v"])(Object(s["f"])(l,null,null,512),[[s["s"],e.$store.state.code_page]]),Object(s["f"])(u),Object(s["f"])(d),Object(s["v"])(Object(s["f"])(_,null,null,512),[[s["s"],"main"==e.$store.state.right_menu]]),Object(s["v"])(Object(s["f"])(p,null,null,512),[[s["s"],"docs"==e.$store.state.right_menu]])],64)}n("ac1f"),n("1276");var o={id:"grapesjs"},r=Object(s["f"])("div",{id:"editor-container"},[Object(s["f"])("div",{id:"gjs"})],-1),i=Object(s["f"])("div",{class:"panel__wordpress"},null,-1),c={class:"editor_select_template"},l={id:"vue-for-grapes",style:{display:"none"}};function u(e,t,n,a,u,d){var _=Object(s["p"])("WpData"),p=Object(s["p"])("WpQuery");return Object(s["v"])((Object(s["j"])(),Object(s["c"])("div",o,[r,i,Object(s["f"])("div",c,[Object(s["f"])("select",null,[(Object(s["j"])(!0),Object(s["c"])(s["a"],null,Object(s["n"])(d.owy_templates,(function(e,t){return Object(s["j"])(),Object(s["c"])("optgroup",{key:t,label:t},[(Object(s["j"])(!0),Object(s["c"])(s["a"],null,Object(s["n"])(e,(function(e,t){return Object(s["j"])(),Object(s["c"])("option",{key:t,selected:e.post_name==d.current_template_name},Object(s["q"])(e.post_title),9,["selected"])})),128))],8,["label"])})),128))])]),Object(s["f"])("div",l,[Object(s["f"])(_),Object(s["f"])(p,{ref:"WpQuery"},null,512)])],512)),[[s["s"],d.display]])}n("7db0");var d=n("53ca"),_=(n("98c5"),n("a826")),p=n.n(_);n("5319"),n("6cfe");function f(e){try{JSON.parse(e)}catch(t){return!1}return!0}var h=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,a=window.jquery;a.ajax({url:window.ajaxurl,type:"post",data:{action:e,data:n,is_vue:!0}}).done((function(e){t=f(e)?JSON.parse(e):e.trim(),s(t)})).fail((function(){s(!1)}))},m=function(e){var t=e.$store.state,n="owy-protected-other-templates";return{load:function(s,a){var o=[];o["gjs-html"]=e.owy_html;var r="";e.jquery.each(t.wp.owy_templates,(function(t,n){e.jquery.each(n,(function(e,t){r+=t.metas.owy_html}))})),o["gjs-html"]+='<div data-gjs-type="other-templates" class="'+n+'">'+r+"<style>."+n+"{display:none}</style></div>",o["gjs-css"]=t.wp.owy_builder_css,e.editor.DomComponents.clear(),e.editor.CssComposer.clear(),e.editor.select(null),a(o),e.editor.UndoManager.clear()},store:function(){var s=this;if(t.ajax_template_saving)t.ajax_template_saving_queue=!0;else{t.ajax_template_saving=!0;var a=t.grapes_template,o=e.editor.getHtml(),r=e.jquery("<div>"+o+"</div>");r.find("."+n).remove(),o=r.html(),a.metas.owy_html=o;var i=e.editor.getCss();i=i.replace("body","#wrapper"),e.$store.state.wp.owy_builder_css=i,h("owy_save_template",{post:a,owy_html:o,css:i},(function(){t.ajax_template_saving=!1,e.jquery.each(t.wp.owy_templates,(function(t,n){e.jquery.each(n,(function(n,s){a["ID"]==s["ID"]&&(e.$store.state.wp.owy_templates[t][n]=a)}))})),t.ajax_template_saving_queue&&(t.ajax_template_saving_queue=!1,s.store())}))}}}},v={id:"modal-wp-data"},b={class:"gjs-sm-header"},g=Object(s["f"])("div",{class:"gjs-sm-header"}," Use WordPess data on your elements ",-1),j={class:"gjs-sm-header"};function w(e,t,n,a,o,r){return Object(s["j"])(),Object(s["c"])("div",v,[Object(s["v"])(Object(s["f"])("div",b,"Select an element before apply WordPress Data",512),[[s["s"],!r.attr.selected]]),Object(s["v"])(Object(s["f"])("div",null,[g,Object(s["f"])("div",j," Selected: #"+Object(s["q"])(r.attr.ccid),1),Object(s["f"])("div",{class:"acf-container",innerHTML:o.wp_data_form},null,8,["innerHTML"])],512),[[s["s"],r.attr.selected&&r.attr.ccid]])])}n("c975"),n("a434"),n("b0c0"),n("841c");var y={data:function(){return{wp_data_form:null,restoring:!1,form_selector:"#modal-wp-data .acf-container form",is_saving:!1,exclude_types:[],update_content:!1}},mounted:function(){var e=this;setTimeout((function(){e.$parent.editor.on("run:core:undo",(function(){e.restore_fields_from_attrs()})),e.$parent.editor.on("run:core:redo",(function(){e.restore_fields_from_attrs()})),e.$parent.editor.on("component:selected",(function(t){e.toolbar_wp_data(t)}))}),1)},computed:{editor:function(){return this.$parent.editor},attr:function(){var e=this.$store.state.modal_wp_data_attrs;return e},grapes_template:function(){return this.$store.state.grapes_template}},methods:{init_acf:function(){var e=this;setTimeout((function(){var t=e.jquery,n=t(e.form_selector),s=t('[data-name="query_from"] select'),a=n.find('[data-name="example"] select');t(document).trigger("acf/setup_fields",t(".acf-container")),t(window).trigger("load"),t(e.form_selector).append('<input type="hidden" name="vue_wp_data" value="true">'),t(e.form_selector).find(".acf-form-submit input").hide(),e.active_form(),t(e.form_selector).find('[data-name="template"] input').val(e.grapes_template.post_name),t(e.form_selector).find('[data-name="component_id"] input').val(e.attr.ccid),t(e.form_selector).find('[data-name="query_from"] select, [data-name="example"] select').unbind("change").on("change",(function(){e.reload_form_and_save()})),n.unbind("change").on("change",(function(){e.save_acf_form()})),a.on("change",(function(){e.update_content=!0})),t('[data-name="open_query_generator"] ').on("click",(function(){e.editor.Modal.onceOpen((function(){t("#vue-for-grapes > #owy-wp-query-vue").appendTo("#gjs-mdl-c");var n=e.$parent.$refs.WpQuery;n.opened("new_post")})).onceClose((function(){t("#gjs-mdl-c > #owy-wp-query-vue").appendTo("#vue-for-grapes"),e.editor.Modal.setContent("").setTitle("")})).open({title:"WP Query Generator"})})),n.on("submit",(function(e){e.preventDefault()})),e.update_content&&(e.wp_data_simulate(),e.update_content=!1);var o=e.wp_data_get_formated_data_from_acf_attr(e.attr.selected);o&&(a.val()!=o.example&&void 0!=o.example&&(a.val(o.example),e.reload_form_and_save()),"none"==a.val()&&"current"==s.val()&&(a.val(e.wp_date_get_example_from_others("current")),e.reload_form_and_save()))}),1)},get_acf_form:function(){var e=this;this.disable_form();var t={template:this.grapes_template.post_name,id:this.attr.ccid};h("owy_get_builder_wp_data_form_ajx",t,(function(t){e.wp_data_form=t,e.init_acf()}))},save_acf_form:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.jquery;if(!this.is_saving){this.is_saving=!0;var s=n(this.form_selector).serializeObject();s.action="owy_save_wp_data",n.post(this.ajaxurl,s,(function(s){var a=n.parseJSON(s);console.log("save wp data",a,e.attr),e.restoring||e.attr.selected.setAttributes({"data-wp-data":e.get_data_attr_for_grapes_comp(),"data-wp-data-id":a.post_id}),e.restoring=!1,e.is_saving=!1,e.wp_data_simulate(e.attr.selected),null!==t&&t()}))}},get_data_attr_for_grapes_comp:function(){var e=this.jquery,t=e(this.form_selector).serializeArray(),n=[];return e.each(t,(function(e,t){0===t.name.indexOf("_")&&(n[n.length]=e)})),e.each(n,(function(e,n){t.splice(n-e,1)})),JSON.stringify(t)},reload_form_and_save:function(){var e=this;this.disable_form(),this.save_acf_form((function(){e.get_acf_form()}))},disable_form:function(){this.jquery("#modal-wp-data .acf-container").css("pointer-event","none")},active_form:function(){this.jquery("#modal-wp-data .acf-container").css("pointer-event","auto")},restore_fields_from_attrs:function(){var e=this.jquery,t=this.attr.selected.getAttributes()["data-wp-data"];if(f(t)){var n=JSON.parse(t);e.each(n,(function(t,n){e('[name="'+n.name+'"]').val(n.value)})),this.restoring=!0,this.reload_form_and_save()}},toolbar_wp_data:function(e){if(void 0!==e.view.$el.data("wp-data")){var t=e.attributes.toolbar,n=JSON.stringify(t);-1==n.search("owy-cmd-wp-data")&&(t[t.length]={attributes:{class:"fab fa-wordpress-simple"},command:"owy-cmd-wp-data"})}}},watch:{"$store.state.grapes_template":function(){this.wp_data_form=null},"$store.state.modal_wp_data_attrs":function(){this.get_acf_form()}}};n("840e");y.render=w;var O=y,k={id:"owy-wp-query-vue"},x={class:"col1"},q=Object(s["f"])("div",{class:"col2"}," preview ",-1);function M(e,t,n,a,o,r){var i=Object(s["p"])("AcfAdmin");return Object(s["j"])(),Object(s["c"])("div",k,[Object(s["f"])("div",x,[Object(s["f"])(i,{ref:"form"},null,512)]),q])}function T(e,t,n,a,o,r){return Object(s["j"])(),Object(s["c"])("div",{innerHTML:o.form_html},null,8,["innerHTML"])}var C=n("d3ec"),P=n.n(C),D={data:function(){return{form_html:"",form_jq:null,Acf_model:!1,settings:{},acf_setting:{},form_data:{},last_change:{}}},mounted:function(){this.settings&&this.load_form(this.settings)},methods:{load_form:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.jquery,s=["autosave","ready","submit","saved","change","filter_jq_html"];this.settings=t;var a=Object.assign({},t);n.each(s,(function(e,t){a[t]&&delete a[t]})),this.acf_setting=a,h("owy_acf_admin_get_form",a,(function(s){var a=n("<div>"+s+"</div>");t.autosave&&a.find(".acf-form-submit input").remove(),P.a.function(e.settings["filter_jq_html"])&&(a=e.settings["filter_jq_html"](a)),e.form_html=a.html(),n(window).trigger("load"),setTimeout((function(){e.loaded()}),1)}))},loaded:function(){var e=this,t=this.jquery;this.form_jq=t(this.$el).find("form"),P.a.function(this.settings["ready"])&&this.settings["ready"](this),this.form_jq.on("submit",(function(t){t.preventDefault(),P.a.function(e.settings["submit"])&&e.settings["submit"](e)})),this.form_jq.on("change",(function(n){if(P.a.function(e.settings["change"])){var s=t(n.target).parents(".acf-field").first();e.last_change={name:s.data("name"),key:s.data("key"),value:t(n.target).val(),target:n.target},e.settings["change"](e),e.update_form_data()}}))},update_form_data:function(){this.form_data.serializeObject=this.form_jq.serializeObject(),this.form_data.serializeArray=this.form_jq.serializeArray(),this.form_data.serialize=this.form_jq.serialize()},reload:function(){this.load_form(this.settings)}}};D.render=T;var $=D,E={components:{AcfAdmin:$},methods:{opened:function(e){console.log("wp-query-vue opened",e);var t=this.$refs.form;t.load_form({id:"owy-wp-query-form",field_groups:["group_owy_wp_query_generator"],autosave:!0,saved:function(){console.log("saved")},change:function(e){console.log("change",e)}})}}};n("93bf");E.render=M;var S=E,A=n("3861"),B=n.n(A),L=(n("2568"),{data:function(){return{editor:null,project:null,html:"",css:"",js:"",current_panel:""}},components:{WpData:O,WpQuery:S},mounted:function(){var e=this,t=this.jquery,s=this;n("4e96"),n("6f15"),console.log("theme",this.wp.theme_url+"/plugins/fontawesome-free-5.15.2-web/css/all.css"),this.editor=p.a.init({avoidInlineStyle:1,autorender:!1,showOffsets:1,container:"#gjs",fromElement:!1,height:"100%",width:"100%",storageManager:{type:"local",stepsBeforeSave:1},protectedCss:"",cssIcons:this.wp.theme_url+"/plugins/fontawesome-free-5.15.2-web/css/all.min.css",styleManager:{},panels:{defaults:[]},noticeOnUnload:!1,plugins:["gjs-preset-webpage","gjs-blocks-flexbox",B.a]}),this.editor.on("load",(function(){t(".gjs-pn-options").find('span[title="Fullscreen"], .fa-download, .fa-trash').remove(),t(".gjs-pn-options").find('span[title="View components"]').trigger("click"),t('[title="Open Blocks"]').trigger("click"),t(".gjs-block-categories .gjs-title").trigger("click"),t('[title="Open Style Manager"]').trigger("click")})),this.editor.on("run",(function(){var t=e.jquery(".gjs-layer__t-wrapper > .gjs-layer-count");t.length&&t.text(e.editor.DomComponents.getComponents().length-1)})),t(document).on("click",".gjs-pn-views .gjs-pn-btn",(function(n){e.current_panel=t(n.currentTarget).attr("title")})),this.editor.on("component:selected",(function(){var n=t('[title="'+e.current_panel+'"]');n.hasClass("gjs-pn-active")||n.trigger("click")})),this.editor.StorageManager.add("local",m(s)),this.editor.Commands.add("open-assets",{run:function(){console.log("assets")}}),this.editor.render(),this.init_owy_panels(),this.init_owy_sectors(),this.editor.Commands.add("editor-wp-back",(function(){console.log("close",e),window.location.hash="",e.close()})),this.editor.Commands.add("editor-save",(function(e){e.store()})),this.editor.Commands.add("owy-publish-template",(function(){console.log("publish")})),this.editor.Commands.add("owy-cmd-wp-data",(function(){t(".gjs-pn-views .fa-wordpress").trigger("click")})),this.editor.DomComponents.addType("other-templates",{model:{defaults:{layerable:!1,removable:!1,draggable:!1,droppable:!1,badgable:!1,stylable:!1,highlightable:!1,copyable:!1,resizable:!1,editable:!1}}}),this.init_owy_blocks(),t(this.editor.SelectorManager.selectorTags.$states).append("<option>test</option>"),console.log("gjs Editor",this.editor),this.editor.SelectorManager.add("selectorName")},computed:{display:function(){return null!=this.$store.state.grapes_template},owy_templates:function(){return this.$store.state.wp.owy_templates},current_template_name:function(){var e=this.$store.state.grapes_template;return"object"===Object(d["a"])(e)&&null!==e?e.post_name:""}},methods:{close:function(){this.$store.state.grapes_template=null}},watch:{"$store.state.grapes_template":function(){console.log("watch grapes_template",this.$store.state.grapes_template);var e=this.$store.state.grapes_template;if(this.owy_html="",null!==e){var t=e.metas;t.owy_html&&(this.owy_html=t.owy_html),this.editor.load()}}}});n("a56b");L.render=u;var I=L,W=Object(s["e"])(" Design your WebApp  "),R=Object(s["e"])("  "),U=Object(s["f"])("div",{class:"owy-colors"},[Object(s["f"])("div",{class:"owy-color",style:{background:"#1BC8CA"}}),Object(s["f"])("div",{class:"owy-color",style:{background:"#6953ED"}}),Object(s["f"])("div",{class:"owy-color",style:{background:"#66976F"}}),Object(s["f"])("div",{class:"owy-color",style:{background:"#CAAB1B"}})],-1),H={class:"row"};function N(e,t,n,a,o,r){var i=Object(s["p"])("font-awesome-icon"),c=Object(s["p"])("ItemTemplate"),l=Object(s["p"])("Page");return Object(s["j"])(),Object(s["c"])(l,{class:"owy-templates"},{default:Object(s["u"])((function(){return[Object(s["f"])("h1",null,[W,Object(s["f"])("span",{class:"pointer",onClick:t[1]||(t[1]=function(t){return e.$store.state.right_menu="main"})},[Object(s["f"])(i,{icon:"cogs"})]),R,Object(s["f"])("span",{class:"pointer",onClick:t[2]||(t[2]=function(t){return e.$store.state.right_menu="docs"})},[Object(s["f"])(i,{icon:"book"})])]),U,(Object(s["j"])(!0),Object(s["c"])(s["a"],null,Object(s["n"])(r.group_templates,(function(e,t){return Object(s["j"])(),Object(s["c"])("div",{key:t},[Object(s["f"])("h2",{innerHTML:t},null,8,["innerHTML"]),Object(s["f"])("div",H,[(Object(s["j"])(!0),Object(s["c"])(s["a"],null,Object(s["n"])(e,(function(e,t){return Object(s["j"])(),Object(s["c"])("div",{key:t},[Object(s["f"])(c,{post:e},null,8,["post"])])})),128))])])})),128))]})),_:1})}var K={class:"page"};function z(e,t,n,a,o,r){return Object(s["j"])(),Object(s["c"])("div",K,[Object(s["o"])(e.$slots,"default")])}var J={};n("155d");J.render=z;var Q=J,F={class:"content"};function G(e,t,n,a,o,r){return Object(s["j"])(),Object(s["c"])("div",{class:"owy-item-template",onClick:t[1]||(t[1]=function(e){return r.open_template(n.post)})},[Object(s["f"])("div",{class:"thumb",style:o.thumb_style},null,4),Object(s["f"])("div",F,[Object(s["f"])("p",{innerHTML:n.post.post_title},null,8,["innerHTML"])])])}var V={data:function(){return{thumb_style:{"background-image":this.get_thumb()}}},props:{post:Object},methods:{wp_store:function(){return this.$store.state.wp},get_thumb:function(){return"url("+this.wp_store().owy_builder_url+"assets/thumb.svg)"},open_template:function(e){window.location.hash=e.post_name,this.$store.state.grapes_template=e}}};n("7d87");V.render=G;var X=V,Y={name:"templates",components:{Page:Q,ItemTemplate:X},mounted:function(){},computed:{group_templates:function(){return this.$store.state.wp.owy_templates}}};n("346a");Y.render=N;var Z=Y,ee={class:"owy-shortcuts gjs-one-bg"},te=Object(s["f"])("div",{class:"label gjs-four-color"},"Shortcuts:",-1),ne=Object(s["f"])("div",{class:"shortcut"},"Post types & taxonomies",-1),se=Object(s["f"])("div",{class:"shortcut"},"Forms",-1),ae=Object(s["f"])("div",{class:"shortcut"},"Users roles",-1);function oe(e,t,n,a,o,r){return Object(s["j"])(),Object(s["c"])("div",ee,[te,ne,se,ae,Object(s["f"])("div",{class:"shortcut",onClick:t[1]||(t[1]=function(t){return e.$store.state.code_page=!0})},"Custom Code")])}var re={};n("b5e5");re.render=oe;var ie=re,ce=Object(s["w"])("data-v-47f1a35d");Object(s["l"])("data-v-47f1a35d");var le={class:"wrapper"},ue={class:"chat-wrap gjs-one-bg"},de=Object(s["f"])("h3",{class:"clear"},"Users:",-1),_e={class:"users"},pe=Object(s["f"])("h3",{class:"clear"},"Messages:",-1),fe={key:0,class:"room-chat"},he={class:"messages"},me={class:"sender"},ve={type:"submit"};Object(s["k"])();var be=ce((function(e,t,n,a,o,r){var i=Object(s["p"])("font-awesome-icon");return Object(s["j"])(),Object(s["c"])("div",{id:"owy-chat-builder",onClick:t[4]||(t[4]=function(){return r._close&&r._close.apply(r,arguments)})},[Object(s["f"])("div",{class:"chat-button",onClick:t[1]||(t[1]=function(){return r._open&&r._open.apply(r,arguments)})},[Object(s["f"])(i,{icon:"comment"})]),Object(s["v"])(Object(s["f"])("div",le,[Object(s["f"])("div",ue,[de,Object(s["f"])("div",_e,[(Object(s["j"])(!0),Object(s["c"])(s["a"],null,Object(s["n"])(o.users,(function(e,t){return Object(s["j"])(),Object(s["c"])("div",{class:"user",key:t},Object(s["q"])(e.name),1)})),128))]),pe,o.db_ready?(Object(s["j"])(),Object(s["c"])("div",fe,[Object(s["f"])("div",he,[(Object(s["j"])(!0),Object(s["c"])(s["a"],null,Object(s["n"])(o.messages,(function(e,t){return Object(s["j"])(),Object(s["c"])("div",{class:["message",{itsme:o.room.user_peer_id==e.peer,"gjs-four-bg":o.room.user_peer_id==e.peer,other:o.room.user_peer_id!=e.peer}],key:t},[o.room.user_peer_id!=e.peer?(Object(s["j"])(),Object(s["c"])("label",{key:0,class:"author gjs-four-color",innerHTML:r.get_name(e)},null,8,["innerHTML"])):Object(s["d"])("",!0),Object(s["f"])("div",{class:"text",innerHTML:r.format_text(e.message)},null,8,["innerHTML"])],2)})),128))]),Object(s["f"])("div",me,[Object(s["f"])("form",{onSubmit:t[3]||(t[3]=function(){return r.send_message&&r.send_message.apply(r,arguments)})},[Object(s["v"])(Object(s["f"])("textarea",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.input_message=e}),name:"message",required:""},null,512),[[s["r"],o.input_message]]),Object(s["f"])("button",ve,[Object(s["f"])(i,{icon:"paper-plane"})])],32)])])):Object(s["d"])("",!0)])],512),[[s["s"],1==o.open]])])})),ge=(n("a15b"),n("f4e1")),je=n.n(ge),we={data:function(){return{open:!0,users:{},room:null,db_ready:!1,input_message:"",messages:[]}},methods:{_open:function(){this.open=!0},_close:function(e){this.jquery(e.target).hasClass("wrapper")&&(this.open=!1)},init_chat:function(){var e=this;this.room.on("users:update",(function(t){console.log("users:update",t),e.users={},e.users=t})),this.room.on("database:ready",(function(t){e.db_ready=!0,e.database=t,e.update_messages()})),this.room.on("database:save:message",(function(){e.update_messages()}))},update_messages:function(){var e=this;this.database.get("message",(function(t){e.messages=t,e.force_scroll_down()}))},force_scroll_down:function(){var e=this.jquery(".room-chat .messages");setTimeout((function(){e.scrollTop(e[0].scrollHeight)}),100),setTimeout((function(){e.scrollTop(e[0].scrollHeight)}),500),setTimeout((function(){e.scrollTop(e[0].scrollHeight)}),1e3)},send_message:function(e){e.preventDefault(),this.database.save("message",{message:this.input_message,read:!1,user_name:this.room.user_data.name},(function(){console.log("saved")})),this.input_message=""},format_text:function(e){return e=je()(e,"<a>"),e=e.split("\n").join("<br />"),e},get_name:function(e){return e.user_name}},computed:{me:function(){return this.$store.state.wp.current_user}},watch:{"$store.state.builder_room":function(){this.room=this.$store.state.builder_room,null!=this.room&&(console.log(this.room),this.init_chat())}}};n("d00c");we.render=be,we.__scopeId="data-v-47f1a35d";var ye=we,Oe={class:"top-bar gjs-one-bg gjs-pn-panel"},ke=Object(s["f"])("div",{class:"code-col"},[Object(s["f"])("div",{class:"codemirror-wrapper"})],-1),xe=Object(s["f"])("div",{class:"code-options gjs-one-bg"},null,-1);function qe(e,t,n,a,o,r){var i=Object(s["p"])("font-awesome-icon"),c=Object(s["p"])("Page");return Object(s["j"])(),Object(s["c"])(c,{class:"owy-code"},{default:Object(s["u"])((function(){return[Object(s["f"])("div",Oe,[Object(s["f"])("div",{class:"gjs-pn-btn",onClick:t[1]||(t[1]=function(t){return e.$store.state.code_page=!1})},[Object(s["f"])(i,{icon:"times"})])]),ke,xe]})),_:1})}var Me=n("56b3"),Te=n.n(Me),Ce=(n("ebe1"),n("f9d4"),{components:{Page:Q},mounted:function(){var e=Te()(document.querySelector(".codemirror-wrapper"),{value:"function myScript(){return 100;}\n",mode:{name:"javascript",json:!0},lineNumbers:!0,lineWrapping:!0,theme:"material-darker"});console.log(e)}});n("cd21");Ce.render=qe;var Pe=Ce;function De(e,t,n,a,o,r){var i=Object(s["p"])("AcfAdmin"),c=Object(s["p"])("RightMenu");return Object(s["j"])(),Object(s["c"])(c,null,{default:Object(s["u"])((function(){return[Object(s["f"])(i,{ref:"form"},null,512)]})),_:1})}var $e={class:"wrapper gjs-one-bg"};function Ee(e,t,n,a,o,r){return Object(s["j"])(),Object(s["c"])("div",{class:"owy-right-menu",onClick:t[1]||(t[1]=function(){return r.close&&r.close.apply(r,arguments)})},[Object(s["f"])("div",$e,[Object(s["o"])(e.$slots,"default")])])}var Se={methods:{close:function(e){e.target==this.$el&&(this.$store.state.right_menu=null)}}};n("0923");Se.render=Ee;var Ae=Se,Be={components:{RightMenu:Ae,AcfAdmin:$},mounted:function(){var e=this.$refs.form;e.load_form({id:"owy-options",field_groups:["group_owy_options"],autosave:!0,saved:function(){console.log("saved")},change:function(e){console.log("change",e)}})}};Be.render=De;var Le=Be,Ie=Object(s["e"])(" Hello ");function We(e,t,n,a,o,r){var i=Object(s["p"])("RightMenu");return Object(s["j"])(),Object(s["c"])(i,null,{default:Object(s["u"])((function(){return[Ie]})),_:1})}var Re={components:{RightMenu:Ae}};Re.render=We;var Ue=Re,He={data:function(){return{}},components:{OwyTemplates:Z,Grapes:I,OwyCode:Pe,OwyShortcuts:ie,OwyChatBuilder:ye,OwyOptions:Le,OwyDocs:Ue},beforeCreate:function(){this.jquery("body").removeClass("wp-core-ui")},created:function(){},mounted:function(){var e=this;console.log("Store:",this.$store.state);var t=this.jquery,n=window.location.href.split("#")[1];void 0!=n&&t.each(this.$store.state.wp.owy_templates,(function(s,a){t.each(a,(function(t,s){n==s.post_name&&(e.$store.state.grapes_template=s)}))})),this.init_peer_collab()}};n("eb70");He.render=a;var Ne,Ke=He,ze=n("5502"),Je=(n("9278"),n("334d"),n("d4ec")),Qe=n("bee2"),Fe=function(){function e(){Object(Je["a"])(this,e),this.state=window.owy_wp}return Object(Qe["a"])(e,[{key:"update_wp",value:function(e,t){e.wp=Object.assign(e.wp,t.wp)}},{key:"section_change",value:function(e,t){console.log("section_change"),e.wp.current_section=t.current_section,e.wp=Object.assign({},e.wp)}},{key:"sections_load",value:function(e,t){e.wp.sections=t.sections;var n=e.wp.sections.length,s=0;function a(t,o){var r=document.querySelector('[data-state="current"] #'+o);null==r?setTimeout((function(){a(t,o)}),1):(s++,e.wp.sections[t].dom=r,n==s&&(e.wp=Object.assign({},e.wp)))}e.wp.sections.forEach((function(e,t){a(t,e.post_name)}))}}]),e}(),Ge=new Fe,Ve=(n("d99c"),n("3835")),Xe={},Ye={},Ze=function(){function e(){Object(Je["a"])(this,e),this.state=window.wp.options}return Object(Qe["a"])(e,[{key:"set_option",value:function(e,t){for(var n=0,s=Object.entries(t);n<s.length;n++){var a=Object(Ve["a"])(s[n],2),o=a[0],r=a[1];"type"!=o&&(Ye[o]=o,Xe[o]=r,console.log("set_option",o,r),this.state.option[o]=r)}clearTimeout(Ne),Ne=setTimeout((function(){console.log("one time ajax",Xe),h("save_theme_option",{keys:Ye,state:Xe},(function(e){console.log("ajax return",e)})),Ye={},Xe={}}),500)}},{key:"get_option",value:function(){}}]),e}(),et=new Ze,tt=Object(ze["a"])({state:{grapes_template:null,ajax_template_saving:!1,ajax_template_saving_queue:!1,examples_vars:{},modal_wp_data_attrs:{},code_page:!1,right_menu:null,wp:Ge.state,builder_room:null},mutations:{update_wp:Ge.update_wp,sections_load:Ge.sections_load,section_change:Ge.section_change,set_option:et.set_option,get_option:et.get_option}}),nt=tt,st=(n("b2ed"),n("3333"),n("ec7f"),n("c2ab"),n("4012"),function(){var e=window.jquery,t={};function n(e,t){if(e.length<1)return t;var s=e[0];"]"==s.slice(-1)&&(s=s.slice(0,-1));var a={};if(1==e.length)a[s]=t;else{e.shift();var o=n(e,t);a[s]=o}return a}function s(t){var n=[];return e.each(t.serializeArray(),(function(t,s){if(s.name.indexOf("[]")<0)return n.push(s),!0;var a=s.name.split("[]")[0],o=!1;e.each(n,(function(e,t){t.name===a&&(o=!0,n[e]["value"].push(s.value))})),o||n.push({name:a,value:[s.value]})})),n}var a=s(this);return e.each(a,(function(){var s=this.value,a=this.name.split("["),o=n(a,s);e.extend(!0,t,o)})),t}),at=n("ecee"),ot=n("c074"),rt=n("b702"),it=n("f2d1"),ct=n("ad3d"),lt=function(){var e=this.jquery,t=this;this.editor.Panels.addPanel({id:"panel__wordpress",el:".panel__wordpress",buttons:[{id:"editor-wp-back",active:!1,className:"editor-wp-back",label:'<div title="Close editor"><span class="fas fa-times"></span></div>',command:"editor-wp-back"},{id:"editor-save",active:!1,className:"editor-save",label:'<div title="Save as development"><span class="fa fa-save"></span></div>',command:"editor-save"},{id:"editor-publish",active:!1,className:"editor-publish",label:'<div title="Publish"><span class="fa fa-upload"></span></div>',command:"owy-publish-template"}]}),this.editor.Panels.addPanel({id:"editor_select_template",el:".editor_select_template"});var n=this.editor.Panels,s=null;n.addButton("views",{id:"wp-data-panel",attributes:{class:"fab fa-wordpress-simple",title:"Edit WordPress data"},active:!1,command:{run:function(a){if(null==s){var o=document.createElement("div");o.innerHTML='\n\t\t\t\t\t\t<div id="panel-wp-data">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t';var r=n.getPanel("views-container");r.set("appendContent",o).trigger("change:appendContent"),s=o,e("#vue-for-grapes > #modal-wp-data").appendTo("#panel-wp-data")}a.getSelected()&&(t.$store.state.modal_wp_data_attrs={editor:a,selected:a.getSelected(),ccid:a.getSelected().ccid}),s.style.display="block"},stop:function(){null!=s&&(s.style.display="none")}}});var a=null;n.addButton("views",{id:"wp-data-panel",attributes:{class:"fa fa-bolt",title:"Edit States interaction"},active:!1,command:{run:function(){if(null==a){var e=document.createElement("div");e.innerHTML='\n\t\t\t\t\t\t<div id="panel-states-interact">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t';var t=n.getPanel("views-container");t.set("appendContent",e).trigger("change:appendContent"),a=e}a.style.display="block"},stop:function(){null!=a&&(a.style.display="none")}}});var o={"fa fa-square-o":"far fa-square","fa fa-repeat":"fas fa-redo","fa fa-mobile":"fas fa-mobile-alt","fa fa-tablet":"fas fa-tablet-alt"};e.each(this.editor.Panels.getPanels().models,(function(t,n){e.each(n.buttons.models,(function(t,n){var s=n.attributes.className;e.each(o,(function(e,t){s=s.replace(e,t)})),n.set("className",s)}))}))},ut=function(e){e.add("my-first-block",{label:'<i class="far fa-square"></i>Simple block',category:"test",content:'<div data-gjs-type="test" data-widget="test" class="my-block">This is a simple block</div>',attributes:{test:"Insert h1 block"}})},dt=function(){var e=this;console.log("init blocks",this.editor);var t=this.jquery;console.log("blocks",this.editor.BlockManager.getAll());var n=[];t.each(this.editor.BlockManager.getAll().models,(function(e,t){n[n.length]=t.id})),t.each(n,(function(t,n){e.editor.BlockManager.remove(n)})),ut(this.editor.BlockManager),this.editor.DomComponents.addType("test",{isComponent:function(e){return"test"==t(e).data("widget")},model:{defaults:{traits:["id","title","data-test",{type:"button",text:"Click me",full:!0,command:function(){return alert("Hello")}},{type:"select",label:"Type",name:"type",options:[{id:"text",name:"Text"},{id:"email",name:"Email"},{id:"password",name:"Password"},{id:"number",name:"Number"}]},{type:"checkbox",name:"required"}]}},init:function(){this.on("change:attributes:id",(function(){console.log("change id")}))}})},_t=function(){var e=this.jquery;console.log(e)},pt=(n("81ff"),n("44ba"),n("9fc9"),n("14ed"),n("678f"),n("2572")),ft=n.n(pt),ht=n("6b48"),mt=function(){function e(t,n){var s=this;Object(Je["a"])(this,e),console.log("Db init",t,n),this.ready=!1,this.PeerRoom=n,this.db_name=n.host_peer_id,this.db=new ht["a"]("PeerDB-"+this.db_name),this.stores={},this.default_cols="++id,&uid,timestamp,peer";for(var a=0,o=Object.entries(t);a<o.length;a++){var r=Object(Ve["a"])(o[a],2),i=r[0],c=r[1];console.log("db object",i,c),this.stores[i]=this.default_cols;for(var l=0,u=Object.entries(c);l<u.length;l++){var d=Object(Ve["a"])(u[l],2),_=d[0],p=d[1];console.log("db object",_,p),this.stores[i]+=","+_}}this.db.version(1).stores(this.stores),this.db.open().then((function(){n.event("database:ready",s)})).catch((function(e){n.event("database:error",e),n.event("database:ready",s)})),n.on("receive:save",(function(e){s.save(e.key,e.data,null,!1,e.peer)}))}return Object(Qe["a"])(e,[{key:"save",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t.timestamp=Date.now(),t.peer=this.PeerRoom.user_peer_id,null!=o&&(t.peer=o);try{this.db.close()}catch(r){console.log(r)}this.db=new ht["a"]("PeerDB-"+this.db_name),this.db.version(2).stores(this.stores),this.db.open(),this.db.transaction("rw",this.db[e],(function(){n.db[e].add(t),n.PeerRoom.event("database:save:"+e,n),null!=s&&s()})).catch((function(e){console.error(e.stack||e)})),a&&this.PeerRoom.send_to_all({save:{key:e,data:t}})}},{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==s&&(s=n),this.db.close(),this.db=new ht["a"]("PeerDB-"+this.db_name),this.db.version(2).stores(this.stores),this.db.open().then((function(){t.db.table(e).toArray().then((function(e){s(e)}))}))}}]),e}(),vt=function(){function e(t){var n=this;Object(Je["a"])(this,e);var s={room_group:null,room_name:null,passphrase:null,peer_server:{host:"p2p.oowyea.com",port:"",path:"/",secure:!0},user_data:{},objects:{}};this.settings=Object.assign(s,t),this.peer_server=this.settings.peer_server,this.user_id=this.get_user_id(this.settings.room_group),this.host_peer_id=this.settings.room_group+"-"+this.settings.room_name,this.user_peer_id=this.user_id,this.host_peer=this.init_peer(this.host_peer_id),this.user_peer=this.init_peer(this.user_peer_id),this.is_host=!1,this.host_conn=null,this.conns={},this.users={},this.roomname=t.room_name,this.update_data_hooks={},this.init_data_hooks={},this.events={},this.user_data=t.user_data,this.user_data["peerID"]=this.user_peer_id,this.pings=[],this.pings_timer=[],console.log("PeerRoom",this),setTimeout((function(){n.host_peer=n.init_peer(n.host_peer_id)}),5e3),this.database=new mt(this.settings.objects,this)}return Object(Qe["a"])(e,[{key:"init_peer",value:function(e){var t=this,n=new ft.a(e,this.settings.peer_server);return n.on("open",(function(s){e==t.host_peer_id?(console.log("My host ID",s),t.is_host=!0,t.host_peer=n):(console.log("My peer ID",s),t.user_peer=n,t.users[t.user_peer_id]=t.user_data,t.event("users:update",t.users),t.is_host||t.new_connection(t.user_peer,t.host_peer_id))})).on("connection",(function(s){n.id==t.host_peer_id&&(t.users[s.peer]={}),s.on("data",(function(n){t.receive_data(s.peer,e,n)})).on("close",(function(){console.log("close dataConnection")})).on("error",(function(){console.log("error dataConnection")})).on("disconnected",(function(){console.log("disconnected")}))})).on("error",(function(n){e==t.host_peer_id&&"unavailable-id"==n.type?(t.is_host=!1,t.host_peer=null):e==t.user_peer_id?t.user_peer=null:console.log("peer error",n)})),n}},{key:"new_connection",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0!=e){if(this.conns[t])return this.conns[t].open&&null!=s?void s(this.conns[t]):void 0;this.conns[t]=e.connect(t),this.conns[t].on("open",(function(){t==n.host_peer_id?(console.log("open host"),n.send(n.host_peer_id,{user_join:n.user_data})):console.log("open user",t),null!=s&&s(n.conns[t]),clearTimeout(n.pings_timer[t]),delete n.pings[t],n.ping(t)})).on("close",(function(){console.log("connection close"),clearTimeout(n.pings_timer[t]),delete n.users[t],delete n.pings[t],delete n.conns[t],n.event("users:update",n.users),n.host_peer=n.init_peer(n.host_peer_id)})).on("error",(function(e){console.log("connection error",e)})).on("disconnected",(function(){console.log("disconnected",e,t)}))}else console.log("New connection: Peer not ready")}},{key:"receive_data",value:function(e,t,n){var s=this.decrypt_data(n);t==this.host_peer_id?(s.ping||s.ping_back||console.log("host receive_data",s,"from",e),s.user_join&&(this.conns[e]&&(this.conns[e].close(),delete this.conns[e]),this.users[e]=s.user_join,this.send_to_all({update_users:this.users}),this.event("users:update",this.users))):(s.ping||s.ping_back||console.log("user receive_data",s,"from",e),s.update_users&&(console.log("users",this.users,s.update_users),this.users=s.update_users,this.get_all_users_conns(),this.event("users:update",this.users))),s.ping&&(s.ping.time_back=Date.now(),this.send(e,{ping_back:s.ping},3)),s.ping_back&&(this.pings[s.ping_back.peer_id]=s.ping_back),s.save&&(s.save.peer=e,this.event("receive:save",s.save))}},{key:"send",value:function(e,t,n){var s=this;this.conns[e]&&this.conns[e].open?(t=this.encrypt_data(t),this.conns[e].send(t)):this.conns[e]&&n>=0&&(n--,console.log("connection is not ready: retry in 1000ms",e,"tries: ",n),setTimeout((function(){s.send(e,t,n)}),1e3))}},{key:"send_to_all",value:function(e){var t=this;this.get_all_users_conns((function(n){t.send(n.peer,e)}))}},{key:"get_all_users_conns",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={},n=0,s=Object.entries(this.users);n<s.length;n++){var a=Object(Ve["a"])(s[n],2),o=a[0],r=a[1];o!=this.user_peer_id&&o!=this.host_peer_id&&(t[o]=r)}for(var i=0,c=Object.entries(t);i<c.length;i++){var l=Object(Ve["a"])(c[i],1),u=l[0];this.conns[u]?null!=e&&e(this.conns[u]):this.new_connection(this.user_peer,u,e)}}},{key:"ping",value:function(e){var t=this;if(this.pings[e]){if(null!=this.pings[e].time_back){var n=this.pings[e],s=n.time_back-n.time_sent;e!=this.host_peer_id?this.users[e]["ping"]=s:this.host_ping=s,this.pings[e].time_sent=Date.now(),this.pings[e].time_back=null,this.send(e,{ping:this.pings[e]})}else if(this.conns[e]&&this.pings[e]){var a=Date.now()-this.pings[e].time_sent;if(a>2e3)return delete this.users[e],delete this.pings[e],delete this.conns[e],this.event("users:update",this.users),e==this.host_peer_id&&(this.host_peer=this.init_peer(this.host_peer_id)),void clearTimeout(this.pings_timer[e])}}else console.log("start ping",e),this.pings[e]={peer_id:e,time_sent:Date.now(),time_back:null,try:0},this.send(e,{ping:this.pings[e]});clearTimeout(this.pings_timer[e]),this.pings_timer[e]=setTimeout((function(){t.ping(e)}),500)}},{key:"get_user_id",value:function(e){var t=this.getCookie(e);if(t)return t;var n=this.uuidv4();return this.setCookie(e,n,1),n}},{key:"decrypt_data",value:function(e){return e}},{key:"encrypt_data",value:function(e){return e}},{key:"on",value:function(e,t){"undefined"===typeof this.events[e]&&(this.events[e]=[]);var n=this.events[e].length;"function"==typeof t&&!1===this.events[e].includes(t)&&(this.events[e][n]=t)}},{key:"event",value:function(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}},{key:"getRandomInt",value:function(e){return Math.floor(Math.random()*Math.floor(e))}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}},{key:"setCookie",value:function(e,t,n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3);var a="expires="+s.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}},{key:"getCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),s=0;s<n.length;s++){var a=n[s];while(" "==a.charAt(0))a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}}]),e}(),bt=function(){var e=this.$store.state.wp.current_user,t=e.data;this.$store.state.builder_room=new vt({room_group:this.wp.uid_site,room_name:"owy_builder",passphrase:this.wp.peer_admin_key,rooms:{},peer_server:{host:"p2p.oowyea.com",port:"",path:"/",secure:!0},user_data:{name:t.display_name,id:t.ID},objects:{message:{message:String,read:Boolean,user_name:String}}})},gt=n("9754"),jt=s["b"](Ke);window.jquery.fn.serializeObject=st;var wt=jt.config.globalProperties;wt.jquery=window.jquery,wt.ajaxurl=window.ajaxurl,wt.wp=window.owy_wp,wt.acf=window.acf,at["c"].add(ot["a"],rt["a"],it["a"]),jt.component("font-awesome-icon",ct["a"]),wt.init_owy_panels=lt,wt.init_owy_blocks=dt,wt.init_owy_sectors=_t,wt.init_peer_collab=bt;var yt=wt.jquery;yt.each(gt["a"],(function(e,t){wt[e]=t})),jt.use(nt),jt.mount("#editor")},"5b9c":function(e,t,n){},"7ad7":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="7ad7"},"7d87":function(e,t,n){"use strict";n("f7a1")},"840e":function(e,t,n){"use strict";n("9677")},"93bf":function(e,t,n){"use strict";n("b1da")},9677:function(e,t,n){},9754:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c975"),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3__);__webpack_exports__["a"]={wp_data_simulate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.$store.state.grapes_template;if(null!=n){var s=this.jquery,a=[];console.log("simulate",t),s('[data-name="value"] select option').each((function(e,t){var n=s(t).text().split("(")[1];n=n.substr(0,n.length-1);var o=s(t).val();a[o]=n}));var o=s('[data-name="query_from"] select').val(),r=s('[data-name="example"] select').val();if(null==t){var i=this.wp_data_get_els_by_query(o);s.each(i,(function(t,n){e.wp_data_do_action(n,o,a),"none"!=r&&void 0!=r&&e.wp_data_update_other_examples(n,r)}))}else this.wp_data_do_action(t,o,a)}},wp_data_do_action:function(e,t,n){var s=this.jquery,a=this.wp_data_get_formated_data_from_acf_attr(e);console.log("do_action",e,t,a,n),"none"==t?e.set({editable:!0}):s.each(a.apply_result_to,(function(t,s){"content"==s.action_type&&(e.components(n[s.value]),e.set({editable:!1}))}))},wp_data_get_formated_data_from_acf_attr:function wp_data_get_formated_data_from_acf_attr(el){var $=this.jquery,data_wp_attr=el.attributes.attributes["data-wp-data"];if(data_wp_attr){var wp_data_acf=JSON.parse(data_wp_attr),acf=[],text_key_replace=this.wp_data_get_acf_key_to_name(),row=-1;return $.each(wp_data_acf,(function(index,val){var eval_key=val.name.replaceAll("[","['").replaceAll("]","']"),eval_str;$.each(text_key_replace,(function(e,t){eval_key=eval_key.replaceAll(e,t)})),val.value?eval_str=eval_key+'="'+val.value+'"':"acf[field_603c04b6e48c4]"==val.name&&(row++,eval_str=eval_key+"= {'row-"+row+"':[]}"),eval_str&&0===val.name.indexOf("acf")&&eval(eval_str)})),acf}return!1},wp_data_get_acf_key_to_name:function(){return{field_604098c5b5dd6:"template",field_604098d5b5dd7:"component_id",field_603c0194e42bd:"query_from",field_60423db0a7b8a:"example",field_6040dad4eb7b9:"parent_query",field_603c020fe48c2:"custom_query",field_603c04b6e48c4:"apply_result_to",field_603c076293de1:"value",field_603c0660e48c6:"action_type",field_6042296de9935:"filter"}},wp_data_update_other_examples:function(e,t){var n=this.jquery,s=JSON.parse(e.attributes.attributes["data-wp-data"]);n.each(s,(function(n,a){"acf[field_60423db0a7b8a]"==a.name&&(s[n].value=t,e.attributes.attributes["data-wp-data"]=JSON.stringify(s))}))},wp_date_get_example_from_others:function(e){var t=this,n=this.jquery,s="none";return n.each(this.wp_data_get_els_by_query(e),(function(e,n){var a=t.wp_data_get_formated_data_from_acf_attr(n);"none"!=a.example&&(s=a.example)})),s},wp_data_get_els_by_query:function(e){var t=this,n=this.jquery,s=[];return n.each(this.editor.getComponents().models,(function(n,a){if(a.attributes.attributes["data-wp-data"]){var o=t.wp_data_get_formated_data_from_acf_attr(a);"current"==e&&"current"==o.query_from&&(s[s.length]=a)}})),s}}},"9c8f":function(e,t,n){},a56b:function(e,t,n){"use strict";n("07c7")},afe4:function(e,t,n){},b1da:function(e,t,n){},b5e5:function(e,t,n){"use strict";n("c453")},c453:function(e,t,n){},cd21:function(e,t,n){"use strict";n("9c8f")},d00c:function(e,t,n){"use strict";n("5b9c")},eb70:function(e,t,n){"use strict";n("f9fd")},f7a1:function(e,t,n){},f800:function(e,t,n){},f9fd:function(e,t,n){}});
//# sourceMappingURL=app.js.map