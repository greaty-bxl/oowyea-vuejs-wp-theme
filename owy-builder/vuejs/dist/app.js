(function(e){function t(t){for(var a,r,i=t[0],c=t[1],l=t[2],d=0,_=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&_.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(_.length)_.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={app:0},s=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0923":function(e,t,n){"use strict";n("afe4")},"0d85":function(e,t,n){},"0e0d":function(e,t,n){},"0fdb":function(e,t,n){"use strict";n("ac36")},"1dc0":function(e,t,n){},"1ea9":function(e,t,n){"use strict";n("b143")},2652:function(e,t,n){"use strict";n("f211")},"27a7":function(e,t,n){"use strict";n("932c")},"31e5":function(e,t,n){"use strict";n.r(t);var a=n("f2bf"),o=Object(a["e"])(" Your text here ");function s(e,t,n,s,r,i){return Object(a["j"])(),Object(a["c"])(Object(a["q"])(n.tagname),{"data-owy-block":"text","data-test":"test",contenteditable:"true"},{default:Object(a["v"])((function(){return[o]})),_:1})}var r={props:{tagname:{type:String,default:"p",field:"select",values:["p","h1","h2","h3","h4","span","ANY"]}}};r.render=s;t["default"]=r},"4c83":function(e,t,n){"use strict";n("74b7")},"53ff":function(e,t,n){"use strict";n("f052")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("f2bf");function o(e,t,n,o,s,r){var i=Object(a["p"])("OwyTemplates"),c=Object(a["p"])("Grapes"),l=Object(a["p"])("OwyCode"),u=Object(a["p"])("OwyShortcuts"),d=Object(a["p"])("OwyChatBuilder"),_=Object(a["p"])("OwyOptions"),p=Object(a["p"])("OwyDocs"),f=Object(a["p"])("OwySites"),m=Object(a["p"])("OwyWpFrame");return Object(a["j"])(),Object(a["c"])(a["a"],null,[Object(a["f"])(i),Object(a["f"])(c,{ref:"grapes"},null,512),e.$store.state.code_page?(Object(a["j"])(),Object(a["c"])(l,{key:0})):Object(a["d"])("",!0),Object(a["f"])(u),Object(a["f"])(d),Object(a["w"])(Object(a["f"])(_,null,null,512),[[a["t"],"main"==e.$store.state.right_menu]]),Object(a["w"])(Object(a["f"])(p,null,null,512),[[a["t"],"docs"==e.$store.state.right_menu]]),Object(a["w"])(Object(a["f"])(f,null,null,512),[[a["t"],"my-sites"==e.$store.state.right_menu]]),Object(a["w"])(Object(a["f"])(m,null,null,512),[[a["t"],"wp-frame"==e.$store.state.right_menu]])],64)}n("ac1f"),n("1276");var s={id:"grapesjs"},r=Object(a["f"])("div",{id:"editor-container"},[Object(a["f"])("div",{id:"gjs"})],-1),i=Object(a["f"])("div",{class:"panel__wordpress"},null,-1),c={class:"editor_select_template"},l={id:"vue-for-grapes",style:{display:"none"}};function u(e,t,n,o,u,d){var _=Object(a["p"])("WpData"),p=Object(a["p"])("WpQuery");return Object(a["w"])((Object(a["j"])(),Object(a["c"])("div",s,[r,i,Object(a["f"])("div",c,[Object(a["f"])("select",null,[(Object(a["j"])(!0),Object(a["c"])(a["a"],null,Object(a["n"])(d.owy_templates,(function(e,t){return Object(a["j"])(),Object(a["c"])("optgroup",{key:t,label:t},[(Object(a["j"])(!0),Object(a["c"])(a["a"],null,Object(a["n"])(e,(function(e,t){return Object(a["j"])(),Object(a["c"])("option",{key:t,selected:e.post_name==d.current_template_name},Object(a["r"])(e.post_title),9,["selected"])})),128))],8,["label"])})),128))])]),Object(a["f"])("div",l,[Object(a["f"])(_),Object(a["f"])(p,{ref:"WpQuery"},null,512)])],512)),[[a["t"],d.display]])}n("7db0");var d=n("53ca"),_=(n("98c5"),n("a826")),p=n.n(_);n("5319"),n("6cfe");function f(e){try{JSON.parse(e)}catch(t){return!1}return!0}var m=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=window.jquery;o.ajax({url:window.ajaxurl,type:"post",data:{action:e,data:n,is_vue:!0}}).done((function(e){t=f(e)?JSON.parse(e):e.trim(),a(t)})).fail((function(){a(!1)}))},h=function(e){var t=e.$store.state,n="owy-protected-other-templates";return{load:function(a,o){var s=[];s["gjs-html"]=e.owy_html;var r="",i="",c=t.grapes_template.metas.type,l="";e.jquery.each(t.wp.owy_templates,(function(n,a){e.jquery.each(a,(function(e,n){console.log(n.post_name,t.grapes_template.metas.header),n.post_name=="owy-template-"+t.grapes_template.metas.header&&(r=n.metas.owy_html),n.post_name=="owy-template-"+t.grapes_template.metas.footer&&(i=n.metas.owy_html),l+=n.metas.owy_html}))})),s["gjs-html"]+='<div data-gjs-type="other-templates" style="display:none" class="'+n+'">'+l+"<style>."+n+"{display:none}</style></div>","header"==c?(r=s["gjs-html"],s["gjs-html"]=""):"footer"==c?(i=s["gjs-html"],s["gjs-html"]=""):s["gjs-html"]='<section class="owy-section">'+s["gjs-html"]+"</section>",r&&(s["gjs-html"]="<header>"+r+"</header>"+s["gjs-html"]),i&&(s["gjs-html"]+="<footer>"+i+"</footer>"),console.log("Grapes load",s["gjs-html"]),s["gjs-css"]=t.wp.owy_builder_css,console.log("load",s),e.editor.DomComponents.clear(),e.editor.CssComposer.clear(),e.editor.select(null),o(s),e.editor.UndoManager.clear()},store:function(){var a=this;if(t.ajax_template_saving)t.ajax_template_saving_queue=!0;else{var o=t.grapes_template.metas.type;t.ajax_template_saving=!0;var s=t.grapes_template,r=e.editor.getHtml(),i=e.jquery("<div>"+r+"</div>");i.find("."+n).remove();var c=".owy-section";"header"==o&&(c="header"),"footer"==o&&(c="footer"),r=i.find(c).html(),console.log("store",r),s.metas.owy_html=r;var l=e.editor.getCss();l=l.replace("body","#wrapper"),e.$store.state.wp.owy_builder_css=l,m("owy_save_template",{post:s,owy_html:r,css:l},(function(){t.ajax_template_saving=!1,e.jquery.each(t.wp.owy_templates,(function(t,n){e.jquery.each(n,(function(n,a){s["ID"]==a["ID"]&&(e.$store.state.wp.owy_templates[t][n]=s)}))})),t.ajax_template_saving_queue&&(t.ajax_template_saving_queue=!1,a.store())}))}}}},b={id:"modal-wp-data"},v={class:"gjs-sm-header"},g=Object(a["f"])("div",{class:"gjs-sm-header"}," Use WordPess data on your elements ",-1),j={class:"gjs-sm-header"};function y(e,t,n,o,s,r){return Object(a["j"])(),Object(a["c"])("div",b,[Object(a["w"])(Object(a["f"])("div",v,"Select an element before apply WordPress Data",512),[[a["t"],!r.attr.selected]]),Object(a["w"])(Object(a["f"])("div",null,[g,Object(a["f"])("div",j," Selected: #"+Object(a["r"])(r.attr.ccid),1),Object(a["f"])("div",{class:"acf-container",innerHTML:s.wp_data_form},null,8,["innerHTML"])],512),[[a["t"],r.attr.selected&&r.attr.ccid]])])}n("c975"),n("a434"),n("b0c0"),n("841c");var O={data:function(){return{wp_data_form:null,restoring:!1,form_selector:"#modal-wp-data .acf-container form",is_saving:!1,exclude_types:[],update_content:!1}},mounted:function(){var e=this;setTimeout((function(){e.$parent.editor.on("run:core:undo",(function(){e.restore_fields_from_attrs()})),e.$parent.editor.on("run:core:redo",(function(){e.restore_fields_from_attrs()})),e.$parent.editor.on("component:selected",(function(t){e.toolbar_wp_data(t)}))}),1)},computed:{editor:function(){return this.$parent.editor},attr:function(){var e=this.$store.state.modal_wp_data_attrs;return e},grapes_template:function(){return this.$store.state.grapes_template}},methods:{init_acf:function(){var e=this;setTimeout((function(){var t=e.jquery,n=t(e.form_selector),a=t('[data-name="query_from"] select'),o=n.find('[data-name="example"] select');t(document).trigger("acf/setup_fields",t(".acf-container")),t(window).trigger("load"),t(e.form_selector).append('<input type="hidden" name="vue_wp_data" value="true">'),t(e.form_selector).find(".acf-form-submit input").hide(),e.active_form(),t(e.form_selector).find('[data-name="template"] input').val(e.grapes_template.post_name),t(e.form_selector).find('[data-name="component_id"] input').val(e.attr.ccid),t(e.form_selector).find('[data-name="query_from"] select, [data-name="example"] select').unbind("change").on("change",(function(){e.reload_form_and_save()})),n.unbind("change").on("change",(function(){e.save_acf_form()})),o.on("change",(function(){e.update_content=!0})),t('[data-name="open_query_generator"] ').on("click",(function(){e.editor.Modal.onceOpen((function(){t("#vue-for-grapes > #owy-wp-query-vue").appendTo("#gjs-mdl-c");var n=e.$parent.$refs.WpQuery;n.opened("new_post")})).onceClose((function(){t("#gjs-mdl-c > #owy-wp-query-vue").appendTo("#vue-for-grapes"),e.editor.Modal.setContent("").setTitle("")})).open({title:"WP Query Generator"})})),n.on("submit",(function(e){e.preventDefault()})),e.update_content&&(e.wp_data_simulate(),e.update_content=!1);var s=e.wp_data_get_formated_data_from_acf_attr(e.attr.selected);s&&(o.val()!=s.example&&void 0!=s.example&&(o.val(s.example),e.reload_form_and_save()),"none"==o.val()&&"current"==a.val()&&(o.val(e.wp_date_get_example_from_others("current")),e.reload_form_and_save()))}),1)},get_acf_form:function(){var e=this;this.disable_form();var t={template:this.grapes_template.post_name,id:this.attr.ccid};m("owy_get_builder_wp_data_form_ajx",t,(function(t){e.wp_data_form=t,e.init_acf()}))},save_acf_form:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.jquery;if(!this.is_saving){this.is_saving=!0;var a=n(this.form_selector).serializeObject();a.action="owy_save_wp_data",n.post(this.ajaxurl,a,(function(a){var o=n.parseJSON(a);console.log("save wp data",o,e.attr),e.restoring||e.attr.selected.setAttributes({"data-wp-data":e.get_data_attr_for_grapes_comp(),"data-wp-data-id":o.post_id}),e.restoring=!1,e.is_saving=!1,e.wp_data_simulate(e.attr.selected),null!==t&&t()}))}},get_data_attr_for_grapes_comp:function(){var e=this.jquery,t=e(this.form_selector).serializeArray(),n=[];return e.each(t,(function(e,t){0===t.name.indexOf("_")&&(n[n.length]=e)})),e.each(n,(function(e,n){t.splice(n-e,1)})),JSON.stringify(t)},reload_form_and_save:function(){var e=this;this.disable_form(),this.save_acf_form((function(){e.get_acf_form()}))},disable_form:function(){this.jquery("#modal-wp-data .acf-container").css("pointer-event","none")},active_form:function(){this.jquery("#modal-wp-data .acf-container").css("pointer-event","auto")},restore_fields_from_attrs:function(){var e=this.jquery,t=this.attr.selected.getAttributes()["data-wp-data"];if(f(t)){var n=JSON.parse(t);e.each(n,(function(t,n){e('[name="'+n.name+'"]').val(n.value)})),this.restoring=!0,this.reload_form_and_save()}},toolbar_wp_data:function(e){if(void 0!==e.view.$el.data("wp-data")){var t=e.attributes.toolbar,n=JSON.stringify(t);-1==n.search("owy-cmd-wp-data")&&(t[t.length]={attributes:{class:"fab fa-wordpress-simple"},command:"owy-cmd-wp-data"})}}},watch:{"$store.state.grapes_template":function(){this.wp_data_form=null},"$store.state.modal_wp_data_attrs":function(){this.get_acf_form()}}};n("840e");O.render=y;var w=O,k={id:"owy-wp-query-vue"},x={class:"col1"},T=Object(a["f"])("div",{class:"col2"}," preview ",-1);function q(e,t,n,o,s,r){var i=Object(a["p"])("AcfAdmin");return Object(a["j"])(),Object(a["c"])("div",k,[Object(a["f"])("div",x,[Object(a["f"])(i,{ref:"form"},null,512)]),T])}function M(e,t,n,o,s,r){return Object(a["j"])(),Object(a["c"])("div",{innerHTML:s.form_html},null,8,["innerHTML"])}var C=n("d3ec"),D=n.n(C),P={data:function(){return{form_html:"",form_jq:null,Acf_model:!1,settings:{},acf_setting:{},form_data:{},last_change:{}}},mounted:function(){this.settings&&this.load_form(this.settings)},methods:{load_form:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.jquery,a=["autosave","ready","submit","saved","change","filter_jq_html"];this.settings=t;var o=Object.assign({},t);n.each(a,(function(e,t){o[t]&&delete o[t]})),this.acf_setting=o,m("owy_acf_admin_get_form",o,(function(a){var o=n("<div>"+a+"</div>");t.autosave&&o.find(".acf-form-submit input").remove(),D.a.function(e.settings["filter_jq_html"])&&(o=e.settings["filter_jq_html"](o)),e.form_html=o.html(),n(window).trigger("load"),setTimeout((function(){e.loaded()}),1)}))},loaded:function(){var e=this,t=this.jquery;this.form_jq=t(this.$el).find("form"),D.a.function(this.settings["ready"])&&this.settings["ready"](this),this.form_jq.on("submit",(function(t){t.preventDefault(),D.a.function(e.settings["submit"])&&e.settings["submit"](e)})),this.form_jq.on("change",(function(n){if(D.a.function(e.settings["change"])){var a=t(n.target).parents(".acf-field").first();e.last_change={name:a.data("name"),key:a.data("key"),value:t(n.target).val(),target:n.target},e.settings["change"](e),e.update_form_data()}}))},update_form_data:function(){this.form_data.serializeObject=this.form_jq.serializeObject(),this.form_data.serializeArray=this.form_jq.serializeArray(),this.form_data.serialize=this.form_jq.serialize()},reload:function(){this.load_form(this.settings)}}};P.render=M;var $=P,E={components:{AcfAdmin:$},methods:{opened:function(e){console.log("wp-query-vue opened",e);var t=this.$refs.form;t.load_form({id:"owy-wp-query-form",field_groups:["group_owy_wp_query_generator"],autosave:!0,saved:function(){console.log("saved")},change:function(e){console.log("change",e)}})}}};n("93bf");E.render=q;var S=E,A=n("3861"),I=n.n(A),L=(n("2568"),{data:function(){return{editor:null,project:null,html:"",css:"",js:"",current_panel:""}},components:{WpData:w,WpQuery:S},mounted:function(){var e=this,t=this.jquery,a=this;n("4e96"),n("6f15"),console.log("theme",this.wp.theme_url+"/plugins/fontawesome-free-5.15.2-web/css/all.css"),this.editor=p.a.init({avoidInlineStyle:1,autorender:!1,showOffsets:1,container:"#gjs",fromElement:!1,height:"100%",width:"100%",storageManager:{type:"local",stepsBeforeSave:1},protectedCss:"",cssIcons:this.wp.theme_url+"/plugins/fontawesome-free-5.15.2-web/css/all.min.css",styleManager:{},panels:{defaults:[]},noticeOnUnload:!1,plugins:["gjs-preset-webpage","gjs-blocks-flexbox",I.a]}),this.editor.on("load",(function(){t(".gjs-pn-options").find('span[title="Fullscreen"], .fa-download, .fa-trash').remove(),t(".gjs-pn-options").find('span[title="View components"]').trigger("click"),t('[title="Open Blocks"]').trigger("click"),t(".gjs-block-categories .gjs-title").trigger("click"),t('[title="Open Style Manager"]').trigger("click")})),t(document).on("click",".gjs-pn-views .gjs-pn-btn",(function(n){e.current_panel=t(n.currentTarget).attr("title")})),this.editor.on("component:selected",(function(){var n=t('[title="'+e.current_panel+'"]');n.hasClass("gjs-pn-active")||n.trigger("click")})),this.editor.StorageManager.add("local",h(a)),this.editor.Commands.add("open-assets",{run:function(){console.log("assets")}}),this.init_owy_blocks(),this.editor.render(),this.init_owy_panels(),this.init_owy_sectors(),this.init_owy_traits(),this.editor.Commands.add("editor-wp-back",(function(){console.log("close",e),window.location.hash="",e.close()})),this.editor.Commands.add("editor-save",(function(e){e.store()})),this.editor.Commands.add("owy-publish-template",(function(){console.log("publish")})),this.editor.Commands.add("owy-cmd-wp-data",(function(){t(".gjs-pn-views .fa-wordpress").trigger("click")})),this.editor.DomComponents.addType("other-templates",{model:{defaults:{layerable:!1,removable:!1,draggable:!1,droppable:!1,badgable:!1,stylable:!1,highlightable:!1,copyable:!1,resizable:!1,editable:!1,attributes:{style:"display:none"}}},view:{}}),t(this.editor.SelectorManager.selectorTags.$states).append("<option>test</option>"),console.log("gjs Editor",this.editor),this.editor.SelectorManager.add("selectorName")},computed:{display:function(){return null!=this.$store.state.grapes_template},owy_templates:function(){return this.$store.state.wp.owy_templates},current_template_name:function(){var e=this.$store.state.grapes_template;return"object"===Object(d["a"])(e)&&null!==e?e.post_name:""}},methods:{close:function(){this.$store.state.grapes_template=null}},watch:{"$store.state.grapes_template":function(){console.log("watch grapes_template",this.$store.state.grapes_template);var e=this.$store.state.grapes_template;if(this.owy_html="",null!==e){var t=e.metas;t.owy_html&&(this.owy_html=t.owy_html),this.editor.load()}}}});n("53ff");L.render=u;var B=L,R=Object(a["x"])("data-v-79420087");Object(a["l"])("data-v-79420087");var U=Object(a["e"])(" Design your website  "),W=Object(a["e"])("  "),N=Object(a["f"])("div",{class:"owy-colors"},[Object(a["f"])("div",{class:"owy-color",style:{background:"#1BC8CA"}}),Object(a["f"])("div",{class:"owy-color",style:{background:"#6953ED"}}),Object(a["f"])("div",{class:"owy-color",style:{background:"#66976F"}}),Object(a["f"])("div",{class:"owy-color",style:{background:"#CAAB1B"}})],-1),H={class:"groups"},K={class:"dragger"},z={class:"row drag-row"},J={class:"row"};Object(a["k"])();var F=R((function(e,t,n,o,s,r){var i=Object(a["p"])("font-awesome-icon"),c=Object(a["p"])("Editable"),l=Object(a["p"])("AddTemplate"),u=Object(a["p"])("ItemTemplate"),d=Object(a["p"])("Page");return Object(a["j"])(),Object(a["c"])(d,{class:"owy-templates"},{default:R((function(){return[Object(a["f"])("h1",null,[U,Object(a["f"])("span",{class:"pointer",onClick:t[1]||(t[1]=function(t){return e.$store.state.right_menu="main"})},[Object(a["f"])(i,{icon:"cogs"})]),W,Object(a["f"])("span",{class:"pointer",onClick:t[2]||(t[2]=function(t){return e.$store.state.right_menu="docs"})},[Object(a["f"])(i,{icon:"book"})])]),N,Object(a["f"])("div",H,[(Object(a["j"])(!0),Object(a["c"])(a["a"],null,Object(a["n"])(r.group_templates,(function(e,t){return Object(a["j"])(),Object(a["c"])("div",{class:"group",key:t},[Object(a["f"])("h2",null,[Object(a["f"])(c,{type:"text",value:t},null,8,["value"]),Object(a["f"])(l,{class:"add"}),Object(a["f"])("span",K,[Object(a["f"])(i,{icon:"arrows-alt"})])]),Object(a["f"])("div",z,[(Object(a["j"])(!0),Object(a["c"])(a["a"],null,Object(a["n"])(e,(function(e,t){return Object(a["j"])(),Object(a["c"])("div",{key:t},[Object(a["f"])(u,{post:e},null,8,["post"])])})),128))])])})),128))]),Object(a["f"])("div",null,[(Object(a["j"])(!0),Object(a["c"])(a["a"],null,Object(a["n"])(r.vue_templates,(function(e,t){return Object(a["j"])(),Object(a["c"])("div",{key:t},[Object(a["f"])("h2",{innerHTML:t},null,8,["innerHTML"]),Object(a["f"])("div",J,[(Object(a["j"])(!0),Object(a["c"])(a["a"],null,Object(a["n"])(e,(function(e,t){return Object(a["j"])(),Object(a["c"])("div",{key:t},[Object(a["f"])(u,{post:e},null,8,["post"])])})),128))])])})),128))])]})),_:1})})),Q={class:"page"};function G(e,t,n,o,s,r){return Object(a["j"])(),Object(a["c"])("div",Q,[Object(a["o"])(e.$slots,"default")])}var Y={};n("9c24");Y.render=G;var V=Y,X={class:"thumb"},Z={class:"content"};function ee(e,t,n,o,s,r){var i=Object(a["p"])("font-awesome-icon");return Object(a["j"])(),Object(a["c"])("div",{class:["owy-item-template","type-"+s.type],onClick:t[1]||(t[1]=function(e){return r.open_template(n.post)})},[Object(a["f"])("div",X,["hierarchy"==s.type?(Object(a["j"])(),Object(a["c"])(i,{key:0,icon:["fas","copy"]})):"page"==s.type?(Object(a["j"])(),Object(a["c"])(i,{key:1,icon:["fas","file"]})):"block"==s.type?(Object(a["j"])(),Object(a["c"])(i,{key:2,icon:["fas","cube"]})):"master"==s.type?(Object(a["j"])(),Object(a["c"])(i,{key:3,icon:["fas","columns"]})):"vue"==s.type?(Object(a["j"])(),Object(a["c"])(i,{key:4,icon:["fab","vuejs"]})):(Object(a["j"])(),Object(a["c"])(i,{key:5,icon:"layer-group"}))]),Object(a["f"])("div",Z,[Object(a["f"])("p",{innerHTML:n.post.post_title},null,8,["innerHTML"])])],2)}var te={data:function(){return{type:this.post.metas.type}},props:{post:Object},methods:{wp_store:function(){return this.$store.state.wp},open_template:function(e){"vue"!=this.type&&(window.location.hash=e.post_name,this.$store.state.grapes_template=e)}}};n("27a7");te.render=ee;var ne=te,ae=Object(a["x"])("data-v-2db08075");Object(a["l"])("data-v-2db08075");var oe={class:"drop"},se=Object(a["f"])("ul",{class:"gjs-four-color"},[Object(a["f"])("li",null,"Page"),Object(a["f"])("li",null,"Hierarchy"),Object(a["f"])("li",null,"Block"),Object(a["f"])("li",null,"Header"),Object(a["f"])("li",null,"Footer"),Object(a["f"])("li",null,"Group")],-1);Object(a["k"])();var re=ae((function(e,t,n,o,s,r){var i=Object(a["p"])("font-awesome-icon");return Object(a["j"])(),Object(a["c"])("div",{class:"template-add",onMouseleave:t[2]||(t[2]=function(){return r._close&&r._close.apply(r,arguments)})},[Object(a["f"])("button",{onClick:t[1]||(t[1]=function(){return r._open&&r._open.apply(r,arguments)})},[Object(a["f"])(i,{icon:"plus"})]),Object(a["w"])(Object(a["f"])("div",oe,[se],512),[[a["t"],s.open]])],32)})),ie={data:function(){return{open:!1}},methods:{_open:function(){this.open=!0},_close:function(){this.open=!1}}};n("8957");ie.render=re,ie.__scopeId="data-v-2db08075";var ce=ie,le=Object(a["x"])("data-v-6d270722"),ue=le((function(e,t,n,o,s,r){return Object(a["j"])(),Object(a["c"])("span",{type:n.type,contenteditable:"",innerHTML:n.value},null,8,["type","innerHTML"])})),de={props:{type:String,value:String}};n("4c83");de.render=ue,de.__scopeId="data-v-6d270722";var _e=de,pe=n("aa47"),fe={name:"templates",components:{Page:V,ItemTemplate:ne,AddTemplate:ce,Editable:_e},mounted:function(){console.log(pe["a"]),this.init_sortable()},methods:{init_sortable:function(){var e=this.jquery;e(".drag-row").each((function(e,t){pe["a"].create(t,{group:{name:"row",put:["row"]}})})),e(".groups").each((function(e,t){pe["a"].create(t,{handle:".dragger"})}))}},computed:{group_templates:function(){return this.$store.state.wp.owy_templates},vue_templates:function(){return this.$store.state.wp.owy_vue_templates}},watch:{"$store.state.wp.owy_templates":function(){this.init_sortable()}}};n("0fdb"),n("1ea9");fe.render=F,fe.__scopeId="data-v-79420087";var me=fe,he={class:"owy-shortcuts gjs-one-bg"},be=Object(a["f"])("div",{class:"label gjs-four-color"},"Shortcuts:",-1),ve=Object(a["f"])("div",{class:"shortcut"},"Post types & taxonomies",-1),ge=Object(a["f"])("div",{class:"shortcut"},"Forms",-1),je=Object(a["f"])("div",{class:"shortcut"},"Users roles",-1);function ye(e,t,n,o,s,r){return Object(a["j"])(),Object(a["c"])("div",he,[be,ve,ge,je,Object(a["f"])("div",{class:"shortcut",onClick:t[1]||(t[1]=function(t){return e.$store.state.code_page=!0})},"Custom Code"),e.$store.state.wp.builder_my_sites?(Object(a["j"])(),Object(a["c"])("div",{key:0,class:"shortcut",onClick:t[2]||(t[2]=function(t){return e.$store.state.right_menu="my-sites"})}," My Sites ")):Object(a["d"])("",!0)])}var Oe={};n("e0d7");Oe.render=ye;var we=Oe,ke=Object(a["x"])("data-v-13d46c60");Object(a["l"])("data-v-13d46c60");var xe={class:"wrapper"},Te={class:"chat-wrap gjs-one-bg"},qe=Object(a["f"])("h3",{class:"clear"},"Users:",-1),Me={class:"users"},Ce=Object(a["f"])("h3",{class:"clear"},"Messages:",-1),De={key:0,class:"room-chat"},Pe={class:"messages"},$e={class:"sender"},Ee={type:"submit"};Object(a["k"])();var Se=ke((function(e,t,n,o,s,r){var i=Object(a["p"])("font-awesome-icon");return Object(a["j"])(),Object(a["c"])("div",{id:"owy-chat-builder",onClick:t[4]||(t[4]=function(){return r._close&&r._close.apply(r,arguments)})},[Object(a["f"])("div",{class:"chat-button",onClick:t[1]||(t[1]=function(){return r._open&&r._open.apply(r,arguments)})},[Object(a["f"])(i,{icon:"comment"})]),Object(a["w"])(Object(a["f"])("div",xe,[Object(a["f"])("div",Te,[qe,Object(a["f"])("div",Me,[(Object(a["j"])(!0),Object(a["c"])(a["a"],null,Object(a["n"])(s.users,(function(e,t){return Object(a["j"])(),Object(a["c"])("div",{class:"user",key:t},Object(a["r"])(e.name),1)})),128))]),Ce,s.db_ready?(Object(a["j"])(),Object(a["c"])("div",De,[Object(a["f"])("div",Pe,[(Object(a["j"])(!0),Object(a["c"])(a["a"],null,Object(a["n"])(s.messages,(function(e,t){return Object(a["j"])(),Object(a["c"])("div",{class:["message",{itsme:s.room.user_data.name==e.user_name,"gjs-four-bg":s.room.user_data.name==e.user_name,other:s.room.user_data.name!=e.user_name}],key:t},[s.room.user_data.name!=e.user_name?(Object(a["j"])(),Object(a["c"])("label",{key:0,class:"author gjs-four-color",innerHTML:r.get_name(e)},null,8,["innerHTML"])):Object(a["d"])("",!0),Object(a["f"])("div",{class:"text",innerHTML:r.format_text(e.message)},null,8,["innerHTML"])],2)})),128))]),Object(a["f"])("div",$e,[Object(a["f"])("form",{onSubmit:t[3]||(t[3]=function(){return r.send_message&&r.send_message.apply(r,arguments)})},[Object(a["w"])(Object(a["f"])("textarea",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.input_message=e}),name:"message",required:""},null,512),[[a["s"],s.input_message]]),Object(a["f"])("button",Ee,[Object(a["f"])(i,{icon:"paper-plane"})])],32)])])):Object(a["d"])("",!0)])],512),[[a["t"],1==s.open]])])})),Ae=(n("a15b"),n("f4e1")),Ie=n.n(Ae),Le={data:function(){return{open:!1,users:{},room:null,db_ready:!1,input_message:"",messages:[]}},methods:{_open:function(){this.open=!0},_close:function(e){this.jquery(e.target).hasClass("wrapper")&&(this.open=!1)},init_chat:function(){var e=this;this.room.on("users:update",(function(t){console.log("users:update",t),e.users={},e.users=t})),this.room.on("database:ready",(function(t){e.db_ready=!0,e.database=t,e.update_messages()})),this.room.on("database:save:message",(function(){e.update_messages()}))},update_messages:function(){var e=this;this.database.get("message",(function(t){e.messages=t,e.force_scroll_down()}))},force_scroll_down:function(){var e=this.jquery(".room-chat .messages");setTimeout((function(){e.scrollTop(e[0].scrollHeight)}),100),setTimeout((function(){e.scrollTop(e[0].scrollHeight)}),500),setTimeout((function(){e.scrollTop(e[0].scrollHeight)}),1e3)},send_message:function(e){e.preventDefault(),this.database.save("message",{message:this.input_message,read:!1,user_name:this.room.user_data.name},(function(){console.log("saved")})),this.input_message=""},format_text:function(e){return e=Ie()(e,"<a>"),e=e.split("\n").join("<br />"),e},get_name:function(e){return e.user_name}},computed:{me:function(){return this.$store.state.wp.current_user}},watch:{"$store.state.builder_room":function(){this.room=this.$store.state.builder_room,null!=this.room&&(console.log(this.room),this.init_chat())}}};n("c082");Le.render=Se,Le.__scopeId="data-v-13d46c60";var Be=Le,Re={class:"top-bar gjs-one-bg gjs-pn-panel"},Ue=Object(a["f"])("div",{class:"code-col"},[Object(a["f"])("div",{class:"codemirror-wrapper"})],-1),We=Object(a["f"])("div",{class:"code-options gjs-one-bg"},null,-1);function Ne(e,t,n,o,s,r){var i=Object(a["p"])("font-awesome-icon"),c=Object(a["p"])("Page");return Object(a["j"])(),Object(a["c"])(c,{class:"owy-code"},{default:Object(a["v"])((function(){return[Object(a["f"])("div",Re,[Object(a["f"])("div",{class:"gjs-pn-btn",onClick:t[1]||(t[1]=function(t){return e.$store.state.code_page=!1})},[Object(a["f"])(i,{icon:"times"})])]),Ue,We]})),_:1})}var He=n("56b3"),Ke=n.n(He),ze=(n("ebe1"),n("f9d4"),{components:{Page:V},mounted:function(){var e=Ke()(document.querySelector(".codemirror-wrapper"),{value:"function myScript(){return 100;}\n",mode:{name:"javascript",json:!0},lineNumbers:!0,lineWrapping:!0,theme:"material-darker"});console.log(e)}});n("cd21");ze.render=Ne;var Je=ze;function Fe(e,t,n,o,s,r){var i=Object(a["p"])("AcfAdmin"),c=Object(a["p"])("RightMenu");return Object(a["j"])(),Object(a["c"])(c,null,{default:Object(a["v"])((function(){return[Object(a["f"])(i,{ref:"form"},null,512)]})),_:1})}var Qe={class:"wrapper gjs-one-bg"};function Ge(e,t,n,o,s,r){return Object(a["j"])(),Object(a["c"])("div",{class:"owy-right-menu",onClick:t[1]||(t[1]=function(){return r.close&&r.close.apply(r,arguments)})},[Object(a["f"])("div",Qe,[Object(a["o"])(e.$slots,"default")])])}var Ye={methods:{close:function(e){e.target==this.$el&&(this.$store.state.right_menu=null)}}};n("0923");Ye.render=Ge;var Ve=Ye,Xe={components:{RightMenu:Ve,AcfAdmin:$},mounted:function(){var e=this.$refs.form;e.load_form({id:"owy-options",field_groups:["group_owy_options"],autosave:!0,saved:function(){console.log("saved")},change:function(e){console.log("change",e)}})}};Xe.render=Fe;var Ze=Xe,et=Object(a["e"])(" Hello ");function tt(e,t,n,o,s,r){var i=Object(a["p"])("RightMenu");return Object(a["j"])(),Object(a["c"])(i,null,{default:Object(a["v"])((function(){return[et]})),_:1})}var nt={components:{RightMenu:Ve}};nt.render=tt;var at=nt,ot=Object(a["x"])("data-v-c63eb852");Object(a["l"])("data-v-c63eb852");var st={class:"sites"},rt=Object(a["f"])("h3",{class:"clear"},"My websites",-1),it={class:"site"};Object(a["k"])();var ct=ot((function(e,t,n,o,s,r){var i=Object(a["p"])("RightMenu");return Object(a["j"])(),Object(a["c"])(i,null,{default:ot((function(){return[Object(a["f"])("div",st,[rt,(Object(a["j"])(!0),Object(a["c"])(a["a"],null,Object(a["n"])(e.$store.state.wp.builder_my_sites,(function(e,t){return Object(a["j"])(),Object(a["c"])("div",{class:"site",key:t},[Object(a["f"])("a",{href:e.oowyea_url},Object(a["r"])(e.blogname),9,["href"])])})),128)),Object(a["f"])("div",it,[Object(a["f"])("button",{onClick:t[1]||(t[1]=function(t){e.$store.state.right_menu="wp-frame",r.open_new_site()})}," Create a new website ")])])]})),_:1})})),lt={components:{RightMenu:Ve},methods:{open_new_site:function(){this.$store.state.wp_frame=this.$store.state.wp.network_admin_url+"site-new.php"}}};n("5b32");lt.render=ct,lt.__scopeId="data-v-c63eb852";var ut=lt,dt=Object(a["x"])("data-v-2d4edf25"),_t=dt((function(e,t,n,o,s,r){var i=Object(a["p"])("RightMenu");return Object(a["j"])(),Object(a["c"])(i,null,{default:dt((function(){return[Object(a["f"])("iframe",{src:e.$store.state.wp_frame},null,8,["src"])]})),_:1})})),pt={components:{RightMenu:Ve}};n("fe82");pt.render=_t,pt.__scopeId="data-v-2d4edf25";var ft=pt,mt={data:function(){return{}},components:{OwyTemplates:me,Grapes:B,OwyCode:Je,OwyShortcuts:we,OwyChatBuilder:Be,OwyOptions:Ze,OwyDocs:at,OwySites:ut,OwyWpFrame:ft},beforeCreate:function(){this.jquery("body").removeClass("wp-core-ui")},created:function(){},mounted:function(){var e=this;console.log("Store:",this.$store.state);var t=this.jquery,n=window.location.href.split("#")[1];void 0!=n&&t.each(this.$store.state.wp.owy_templates,(function(a,o){t.each(o,(function(t,a){n==a.post_name&&(e.$store.state.grapes_template=a)}))})),this.init_peer_collab()}};n("8cfc");mt.render=o;var ht,bt=mt,vt=n("5502"),gt=(n("9278"),n("334d"),n("d4ec")),jt=n("bee2"),yt=function(){function e(){Object(gt["a"])(this,e),this.state=window.owy_wp}return Object(jt["a"])(e,[{key:"update_wp",value:function(e,t){e.wp=Object.assign(e.wp,t.wp)}},{key:"section_change",value:function(e,t){console.log("section_change"),e.wp.current_section=t.current_section,e.wp=Object.assign({},e.wp)}},{key:"sections_load",value:function(e,t){e.wp.sections=t.sections;var n=e.wp.sections.length,a=0;function o(t,s){var r=document.querySelector('[data-state="current"] #'+s);null==r?setTimeout((function(){o(t,s)}),1):(a++,e.wp.sections[t].dom=r,n==a&&(e.wp=Object.assign({},e.wp)))}e.wp.sections.forEach((function(e,t){o(t,e.post_name)}))}}]),e}(),Ot=new yt,wt=(n("d99c"),n("3835")),kt={},xt={},Tt=function(){function e(){Object(gt["a"])(this,e),this.state=window.wp.options}return Object(jt["a"])(e,[{key:"set_option",value:function(e,t){for(var n=0,a=Object.entries(t);n<a.length;n++){var o=Object(wt["a"])(a[n],2),s=o[0],r=o[1];"type"!=s&&(xt[s]=s,kt[s]=r,console.log("set_option",s,r),this.state.option[s]=r)}clearTimeout(ht),ht=setTimeout((function(){console.log("one time ajax",kt),m("save_theme_option",{keys:xt,state:kt},(function(e){console.log("ajax return",e)})),xt={},kt={}}),500)}},{key:"get_option",value:function(){}}]),e}(),qt=new Tt,Mt=Object(vt["a"])({state:{grapes_template:null,ajax_template_saving:!1,ajax_template_saving_queue:!1,examples_vars:{},modal_wp_data_attrs:{},code_page:!1,right_menu:null,wp_frame:null,wp:Ot.state,builder_room:null},mutations:{update_wp:Ot.update_wp,sections_load:Ot.sections_load,section_change:Ot.section_change,set_option:qt.set_option,get_option:qt.get_option}}),Ct=Mt,Dt=(n("b2ed"),n("3333"),n("ec7f"),n("c2ab"),n("4012"),function(){var e=window.jquery,t={};function n(e,t){if(e.length<1)return t;var a=e[0];"]"==a.slice(-1)&&(a=a.slice(0,-1));var o={};if(1==e.length)o[a]=t;else{e.shift();var s=n(e,t);o[a]=s}return o}function a(t){var n=[];return e.each(t.serializeArray(),(function(t,a){if(a.name.indexOf("[]")<0)return n.push(a),!0;var o=a.name.split("[]")[0],s=!1;e.each(n,(function(e,t){t.name===o&&(s=!0,n[e]["value"].push(a.value))})),s||n.push({name:o,value:[a.value]})})),n}var o=a(this);return e.each(o,(function(){var a=this.value,o=this.name.split("["),s=n(o,a);e.extend(!0,t,s)})),t}),Pt=n("ecee"),$t=n("c074"),Et=n("b702"),St=n("f2d1"),At=n("ad3d"),It=function(){var e=this.jquery,t=this;this.editor.Panels.addPanel({id:"panel__wordpress",el:".panel__wordpress",buttons:[{id:"editor-wp-back",active:!1,className:"editor-wp-back",label:'<div title="Close editor"><span class="fas fa-times"></span></div>',command:"editor-wp-back"},{id:"editor-save",active:!1,className:"editor-save",label:'<div title="Save as development"><span class="fa fa-save"></span></div>',command:"editor-save"},{id:"editor-publish",active:!1,className:"editor-publish",label:'<div title="Publish"><span class="fa fa-upload"></span></div>',command:"owy-publish-template"}]}),this.editor.Panels.addPanel({id:"editor_select_template",el:".editor_select_template"});var n=this.editor.Panels,a=null;n.addButton("views",{id:"wp-data-panel",attributes:{class:"fab fa-wordpress-simple",title:"Edit WordPress data"},active:!1,command:{run:function(o){if(null==a){var s=document.createElement("div");s.innerHTML='\n\t\t\t\t\t\t<div id="panel-wp-data">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t';var r=n.getPanel("views-container");r.set("appendContent",s).trigger("change:appendContent"),a=s,e("#vue-for-grapes > #modal-wp-data").appendTo("#panel-wp-data")}o.getSelected()&&(t.$store.state.modal_wp_data_attrs={editor:o,selected:o.getSelected(),ccid:o.getSelected().ccid}),a.style.display="block"},stop:function(){null!=a&&(a.style.display="none")}}});var o=null;n.addButton("views",{id:"wp-data-panel",attributes:{class:"fa fa-bolt",title:"Edit States interaction"},active:!1,command:{run:function(){if(null==o){var e=document.createElement("div");e.innerHTML='\n\t\t\t\t\t\t<div id="panel-states-interact">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t';var t=n.getPanel("views-container");t.set("appendContent",e).trigger("change:appendContent"),o=e}o.style.display="block"},stop:function(){null!=o&&(o.style.display="none")}}});var s={"fa fa-square-o":"far fa-square","fa fa-repeat":"fas fa-redo","fa fa-mobile":"fas fa-mobile-alt","fa fa-tablet":"fas fa-tablet-alt"};e.each(this.editor.Panels.getPanels().models,(function(t,n){e.each(n.buttons.models,(function(t,n){var a=n.attributes.className;e.each(s,(function(e,t){a=a.replace(e,t)})),n.set("className",a)}))}))},Lt=(n("d81d"),n("d3b7"),n("ddb0"),n("5530")),Bt=function(){var e=this,t=this.jquery,o=[];t.each(this.editor.BlockManager.getAll().models,(function(e,t){o[o.length]=t.id})),t.each(o,(function(t,n){e.editor.BlockManager.remove(n)})),console.log("types",this.editor.DomComponents.getTypes(),this.editor.DomComponents.getType("checkbox"));var s=this.editor.DomComponents,r=s.getType("text"),i=r.model,c=r.view,l=s.getType("cell"),u=l.model,d=l.view;this.editor.DomComponents.addType("block",{isComponent:function(e){return void 0!==t(e).data("owy-block")&&"text"!==t(e).data("owy-block")},model:{defaults:Object(Lt["a"])(Object(Lt["a"])({},u.prototype.defaults),{},{draggable:"section, header, footer, [data-owy-block]",droppable:!0,badgable:!0,editable:!0})},view:d}),this.editor.DomComponents.addType("text",{isComponent:function(e){return void 0!==t(e).data("owy-block")&&"text"==t(e).data("owy-block")},model:{defaults:Object(Lt["a"])(Object(Lt["a"])({},i.prototype.defaults),{},{label:"my name",draggable:"section, header, footer, [data-owy-block]"})},view:c});for(var _=["header","section","footer"],p=function(){var n=_[f];e.editor.DomComponents.addType(n,{isComponent:function(e){return t(e).prop("tagName")==n.toUpperCase()},model:{defaults:{draggable:!1,droppable:!0,badgable:!1,editable:!1,removable:!1,copyable:!1}}})},f=0;f<_.length;f++)p();var m=n("999c");m.keys().map((function(o){var s=o.substring(2),r=n("5b7e")("./".concat(s)).default,i=document.createElement("div"),c=a["b"](r.vue,{});c.mount(i),t("head style").each((function(e,n){t(n).text().indexOf("grapesjs add css")>=0&&t(i).append("<style>"+t(n).text()+"<style>")}));var l={slug:"",label:"give a name to your block",category:"block",content:t(i).html(),attributes:{"data-owy-block":t(i).find(">*").first().data("owy-block")}};r=Object.assign(l,r),console.log(r),e.editor.BlockManager.add(r.slug,r)}))},Rt=function(e,t){var n=e.StyleManager;n.addSector("advanced-selector",{name:"Advanced Selector",open:!0,properties:[]},{at:0});var a=n.addProperty("advanced-selector",{name:"Parent Selector",property:"parent-selector",type:"text",defaults:""},{at:1});a.view.model.on("change:value",(function(e){var o=e.attributes.value,s=t(".gjs-clm-sel-id").text()+t(".gjs-clm-sel-rule").text();"body"==o&&(o="#wrapper"),a.set("value",!1),setTimeout((function(){t("#gjs-sm-parent-selector .gjs-sm-label").removeClass("gjs-four-color")}),10),o&&n.setTarget(o+" "+s)})),n.addProperty("advanced-selector",{name:"Dynamic State",property:"dynamic-state",type:"select",defaults:"none",list:[{value:"none",name:"- none -"}]},{at:1})},Ut=function(){console.log("sector",this.editor),Rt(this.editor,this.jquery)};function Wt(e,t,n,o,s,r){return Object(a["j"])(),Object(a["c"])("span")}var Nt={mounted:function(){}};n("2652");Nt.render=Wt;var Ht=Nt;function Kt(e,t,n,o,s,r){return Object(a["j"])(),Object(a["c"])("div")}var zt={mounted:function(){}};n("8316");zt.render=Kt;var Jt=zt;function Ft(e,t,n){e.addTrait({type:"separator",name:"data-owy-event-separator"},{at:n}),e.addTrait({type:"text",name:"data-owy-event-value-"+t,label:"State value"},{at:n}),e.addTrait({type:"text",name:"data-owy-event-state-"+t,label:"Update state"},{at:n}),e.addTrait({type:"select",name:"data-owy-event-trigger-"+t,label:"event",options:[{id:"click",name:"Click"},{id:"mouseover",name:"Mouse over"},{id:"mouseout",name:"Mouse out"},{id:"keydown",name:"Key down"},{id:"change",name:"Change"},{id:"enterscreen",name:"Enter in screen"},{id:"inscreen",name:"Is in screen"},{id:"leavescreen",name:"Leave screen"},{id:"any",name:"- Enter an event -"},{id:"none",name:"- Remove event -",value:!1}]},{at:n})}var Qt=1,Gt=window.jquery;function Yt(e){var t=e.getSelected(),n=null;Gt.each(t.attributes.traits.models,(function(e,a){"add-event"==a.attributes.name&&(n=t.getTraitIndex(a.attributes.name))})),Ft(t,Qt,n),Qt++}var Vt=function(e){e.on("component:selected",(function(t){setTimeout((function(){if(!t.getTrait("data-owy-event")){t.addTrait({type:"grp-title",name:"data-owy-event",label:"Event to state"}),t.addTrait({type:"button",name:"add-event",label:!1,text:"Add an event",full:1,command:Yt}),Yt(e);var n=0;Gt.each(t.attributes.attributes,(function(t){0===t.indexOf("data-owy-event-trigger")&&(n++,n>1&&Yt(e))}))}}),1)}))},Xt=Object(a["f"])("form",null,[Object(a["f"])("select",{name:"query-type"},[Object(a["f"])("option",null,"- Query type -")]),Object(a["f"])("select",null,[Object(a["f"])("option",null,"- Examples - ")]),Object(a["f"])("br"),Object(a["f"])("input",{type:"",name:""})],-1);function Zt(e,t,n,o,s,r){return Object(a["j"])(),Object(a["c"])("div",null,[Xt])}var en={data:function(){return{}},props:{editor:Object},mounted:function(){console.log("wp query",this.editor)}};n("6cd9");en.render=Zt;var tn=en,nn=function(e){e.TraitManager.addType("wp-query-form",{createInput:function(){var t=document.createElement("div");return a["b"](tn,{editor:e}).mount(t),t}}),e.on("component:selected",(function(e){setTimeout((function(){e.getTrait("wp-query")||(e.addTrait({type:"grp-title",name:"wp-query",label:"WordPress query"}),e.addTrait({type:"wp-query-form",name:"wp-data-query",label:!1}))}),1)}))},an=function(){this.editor.TraitManager.addType("grp-title",{createInput:function(){var e=document.createElement("div");return a["b"](Ht).mount(e),e}}),this.editor.TraitManager.addType("separator",{createInput:function(){var e=document.createElement("div");return a["b"](Jt).mount(e),e}}),Vt(this.editor),nn(this.editor)},on=(n("81ff"),n("44ba"),n("9fc9"),n("14ed"),n("678f"),n("2572")),sn=n.n(on),rn=n("6b48"),cn=function(){function e(t,n){var a=this;Object(gt["a"])(this,e),console.log("Db init",t,n),this.ready=!1,this.PeerRoom=n,this.db_name=n.host_peer_id,this.db=new rn["a"]("PeerDB-"+this.db_name),this.stores={},this.default_cols="++id,&uid,timestamp,peer";for(var o=0,s=Object.entries(t);o<s.length;o++){var r=Object(wt["a"])(s[o],2),i=r[0],c=r[1];console.log("db object",i,c),this.stores[i]=this.default_cols;for(var l=0,u=Object.entries(c);l<u.length;l++){var d=Object(wt["a"])(u[l],2),_=d[0],p=d[1];console.log("db object",_,p),this.stores[i]+=","+_}}this.db.version(1).stores(this.stores),this.db.open().then((function(){n.event("database:ready",a)})).catch((function(e){n.event("database:error",e),n.event("database:ready",a)})),n.on("receive:save",(function(e){a.save(e.key,e.data,null,!1,e.peer)}))}return Object(jt["a"])(e,[{key:"save",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t.timestamp=Date.now(),t.peer=this.PeerRoom.user_peer_id,null!=s&&(t.peer=s);try{this.db.close()}catch(r){console.log(r)}this.db=new rn["a"]("PeerDB-"+this.db_name),this.db.version(2).stores(this.stores),this.db.open(),this.db.transaction("rw",this.db[e],(function(){n.db[e].add(t),n.PeerRoom.event("database:save:"+e,n),null!=a&&a()})).catch((function(e){console.error(e.stack||e)})),o&&this.PeerRoom.send_to_all({save:{key:e,data:t}})}},{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==a&&(a=n),this.db.close(),this.db=new rn["a"]("PeerDB-"+this.db_name),this.db.version(2).stores(this.stores),this.db.open().then((function(){t.db.table(e).toArray().then((function(e){a(e)}))}))}}]),e}(),ln=function(){function e(t){var n=this;Object(gt["a"])(this,e);var a={room_group:null,room_name:null,passphrase:null,peer_server:{host:"p2p.oowyea.com",port:"",path:"/",secure:!0},user_data:{},objects:{}};this.settings=Object.assign(a,t),this.peer_server=this.settings.peer_server,this.user_id=this.get_user_id(this.settings.room_group),this.host_peer_id=this.settings.room_group+"-"+this.settings.room_name,this.user_peer_id=this.user_id,this.host_peer=this.init_peer(this.host_peer_id),this.user_peer=this.init_peer(this.user_peer_id),this.is_host=!1,this.host_conn=null,this.conns={},this.users={},this.roomname=t.room_name,this.update_data_hooks={},this.init_data_hooks={},this.events={},this.user_data=t.user_data,this.user_data["peerID"]=this.user_peer_id,this.pings=[],this.pings_timer=[],console.log("PeerRoom",this),setTimeout((function(){n.host_peer=n.init_peer(n.host_peer_id)}),5e3),this.database=new cn(this.settings.objects,this)}return Object(jt["a"])(e,[{key:"init_peer",value:function(e){var t=this,n=new sn.a(e,this.settings.peer_server);return n.on("open",(function(a){e==t.host_peer_id?(console.log("My host ID",a),t.is_host=!0,t.host_peer=n):(console.log("My peer ID",a),t.user_peer=n,t.users[t.user_peer_id]=t.user_data,t.event("users:update",t.users),t.is_host||t.new_connection(t.user_peer,t.host_peer_id))})).on("connection",(function(a){n.id==t.host_peer_id&&(t.users[a.peer]={}),a.on("data",(function(n){t.receive_data(a.peer,e,n)})).on("close",(function(){console.log("close dataConnection")})).on("error",(function(){console.log("error dataConnection")})).on("disconnected",(function(){console.log("disconnected")}))})).on("error",(function(n){e==t.host_peer_id&&"unavailable-id"==n.type?(t.is_host=!1,t.host_peer=null):e==t.user_peer_id?t.user_peer=null:console.log("peer error",n)})),n}},{key:"new_connection",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0!=e){if(this.conns[t])return this.conns[t].open&&null!=a?void a(this.conns[t]):void 0;this.conns[t]=e.connect(t),this.conns[t].on("open",(function(){t==n.host_peer_id?(console.log("open host"),n.send(n.host_peer_id,{user_join:n.user_data})):console.log("open user",t),null!=a&&a(n.conns[t]),clearTimeout(n.pings_timer[t]),delete n.pings[t],n.ping(t)})).on("close",(function(){console.log("connection close"),clearTimeout(n.pings_timer[t]),delete n.users[t],delete n.pings[t],delete n.conns[t],n.event("users:update",n.users),n.host_peer=n.init_peer(n.host_peer_id)})).on("error",(function(e){console.log("connection error",e)})).on("disconnected",(function(){console.log("disconnected",e,t)}))}else console.log("New connection: Peer not ready")}},{key:"receive_data",value:function(e,t,n){var a=this.decrypt_data(n);t==this.host_peer_id?(a.ping||a.ping_back||console.log("host receive_data",a,"from",e),a.user_join&&(this.conns[e]&&(this.conns[e].close(),delete this.conns[e]),this.users[e]=a.user_join,this.send_to_all({update_users:this.users}),this.event("users:update",this.users))):(a.ping||a.ping_back||console.log("user receive_data",a,"from",e),a.update_users&&(console.log("users",this.users,a.update_users),this.users=a.update_users,this.get_all_users_conns(),this.event("users:update",this.users))),a.ping&&(a.ping.time_back=Date.now(),this.send(e,{ping_back:a.ping},3)),a.ping_back&&(this.pings[a.ping_back.peer_id]=a.ping_back),a.save&&(a.save.peer=e,this.event("receive:save",a.save))}},{key:"send",value:function(e,t,n){var a=this;this.conns[e]&&this.conns[e].open?(t=this.encrypt_data(t),this.conns[e].send(t)):this.conns[e]&&n>=0&&(n--,console.log("connection is not ready: retry in 1000ms",e,"tries: ",n),setTimeout((function(){a.send(e,t,n)}),1e3))}},{key:"send_to_all",value:function(e){var t=this;this.get_all_users_conns((function(n){t.send(n.peer,e)}))}},{key:"get_all_users_conns",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={},n=0,a=Object.entries(this.users);n<a.length;n++){var o=Object(wt["a"])(a[n],2),s=o[0],r=o[1];s!=this.user_peer_id&&s!=this.host_peer_id&&(t[s]=r)}for(var i=0,c=Object.entries(t);i<c.length;i++){var l=Object(wt["a"])(c[i],1),u=l[0];this.conns[u]?null!=e&&e(this.conns[u]):this.new_connection(this.user_peer,u,e)}}},{key:"ping",value:function(e){var t=this;if(this.pings[e]){if(null!=this.pings[e].time_back){var n=this.pings[e],a=n.time_back-n.time_sent;e!=this.host_peer_id?this.users[e]["ping"]=a:this.host_ping=a,this.pings[e].time_sent=Date.now(),this.pings[e].time_back=null,this.send(e,{ping:this.pings[e]})}else if(this.conns[e]&&this.pings[e]){var o=Date.now()-this.pings[e].time_sent;if(o>2e3)return delete this.users[e],delete this.pings[e],delete this.conns[e],this.event("users:update",this.users),e==this.host_peer_id&&(this.host_peer=this.init_peer(this.host_peer_id)),void clearTimeout(this.pings_timer[e])}}else console.log("start ping",e),this.pings[e]={peer_id:e,time_sent:Date.now(),time_back:null,try:0},this.send(e,{ping:this.pings[e]});clearTimeout(this.pings_timer[e]),this.pings_timer[e]=setTimeout((function(){t.ping(e)}),500)}},{key:"get_user_id",value:function(e){var t=this.getCookie(e);if(t)return t;var n=this.uuidv4();return this.setCookie(e,n,1),n}},{key:"decrypt_data",value:function(e){return e}},{key:"encrypt_data",value:function(e){return e}},{key:"on",value:function(e,t){"undefined"===typeof this.events[e]&&(this.events[e]=[]);var n=this.events[e].length;"function"==typeof t&&!1===this.events[e].includes(t)&&(this.events[e][n]=t)}},{key:"event",value:function(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}},{key:"getRandomInt",value:function(e){return Math.floor(Math.random()*Math.floor(e))}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}},{key:"setCookie",value:function(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var o="expires="+a.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"}},{key:"getCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){var o=n[a];while(" "==o.charAt(0))o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}}]),e}(),un=function(){var e=this.$store.state.wp.current_user,t=e.data;this.$store.state.builder_room=new ln({room_group:this.wp.uid_site,room_name:"owy_builder",passphrase:this.wp.peer_admin_key,rooms:{},peer_server:{host:"p2p.oowyea.com",port:"",path:"/",secure:!0},user_data:{name:t.display_name,id:t.ID},objects:{message:{message:String,read:Boolean,user_name:String}}})},dn=n("9754"),_n=a["b"](bt);window.jquery.fn.serializeObject=Dt;var pn=_n.config.globalProperties;pn.jquery=window.jquery,pn.ajaxurl=window.ajaxurl,pn.wp=window.owy_wp,pn.acf=window.acf,Pt["c"].add($t["a"],Et["a"],St["a"]),_n.component("font-awesome-icon",At["a"]),pn.init_owy_panels=It,pn.init_owy_blocks=Bt,pn.init_owy_sectors=Ut,pn.init_owy_traits=an,pn.init_peer_collab=un;var fn=pn.jquery;fn.each(dn["a"],(function(e,t){pn[e]=t})),_n.use(Ct),_n.mount("#editor")},5900:function(e,t,n){},"5b32":function(e,t,n){"use strict";n("0d85")},"5b7e":function(e,t,n){var a={"./text/text":"31e5","./text/text.config":"6641","./text/text.config.js":"6641","./text/text.vue":"31e5","./wrap/wrap":"5fc8","./wrap/wrap.config":"73e4","./wrap/wrap.config.js":"73e4","./wrap/wrap.vue":"5fc8"};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=s,e.exports=o,o.id="5b7e"},"5fc8":function(e,t,n){"use strict";n.r(t);var a=n("f2bf");function o(e,t,n,o,s,r){return Object(a["j"])(),Object(a["c"])(Object(a["q"])(n.tagname),{"data-owy-block":"wrap",style:{"min-height":"20px"}})}var s={props:{tagname:{type:String,default:"div",field:"select",values:["div","ul","li","ANY"]}}};s.render=o;t["default"]=s},6641:function(e,t,n){"use strict";n.r(t);var a=n("31e5");t["default"]={slug:"owy-text",label:'<i class="fas fa-font icon"></i>Text',category:"Simple blocks",vue:a["default"]}},"6cd9":function(e,t,n){"use strict";n("ec9c")},"73e4":function(e,t,n){"use strict";n.r(t);var a=n("5fc8");t["default"]={slug:"owy-wrap",label:'<i class="far fa-square icon"></i>Wrap',category:"Simple blocks",vue:a["default"]}},"74b7":function(e,t,n){},"7ad7":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="7ad7"},8316:function(e,t,n){"use strict";n("c43d")},"840e":function(e,t,n){"use strict";n("9677")},8957:function(e,t,n){"use strict";n("aa2d")},"8cfc":function(e,t,n){"use strict";n("1dc0")},"932c":function(e,t,n){},9360:function(e,t,n){},"93bf":function(e,t,n){"use strict";n("b1da")},9677:function(e,t,n){},9754:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c975"),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_3__);__webpack_exports__["a"]={wp_data_simulate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.$store.state.grapes_template;if(null!=n){var a=this.jquery,o=[];console.log("simulate",t),a('[data-name="value"] select option').each((function(e,t){var n=a(t).text().split("(")[1];n=n.substr(0,n.length-1);var s=a(t).val();o[s]=n}));var s=a('[data-name="query_from"] select').val(),r=a('[data-name="example"] select').val();if(null==t){var i=this.wp_data_get_els_by_query(s);a.each(i,(function(t,n){e.wp_data_do_action(n,s,o),"none"!=r&&void 0!=r&&e.wp_data_update_other_examples(n,r)}))}else this.wp_data_do_action(t,s,o)}},wp_data_do_action:function(e,t,n){var a=this.jquery,o=this.wp_data_get_formated_data_from_acf_attr(e);console.log("do_action",e,t,o,n),"none"==t?e.set({editable:!0}):a.each(o.apply_result_to,(function(t,a){"content"==a.action_type&&(e.components(n[a.value]),e.set({editable:!1}))}))},wp_data_get_formated_data_from_acf_attr:function wp_data_get_formated_data_from_acf_attr(el){var $=this.jquery,data_wp_attr=el.attributes.attributes["data-wp-data"];if(data_wp_attr){var wp_data_acf=JSON.parse(data_wp_attr),acf=[],text_key_replace=this.wp_data_get_acf_key_to_name(),row=-1;return $.each(wp_data_acf,(function(index,val){var eval_key=val.name.replaceAll("[","['").replaceAll("]","']"),eval_str;$.each(text_key_replace,(function(e,t){eval_key=eval_key.replaceAll(e,t)})),val.value?eval_str=eval_key+'="'+val.value+'"':"acf[field_603c04b6e48c4]"==val.name&&(row++,eval_str=eval_key+"= {'row-"+row+"':[]}"),eval_str&&0===val.name.indexOf("acf")&&eval(eval_str)})),acf}return!1},wp_data_get_acf_key_to_name:function(){return{field_604098c5b5dd6:"template",field_604098d5b5dd7:"component_id",field_603c0194e42bd:"query_from",field_60423db0a7b8a:"example",field_6040dad4eb7b9:"parent_query",field_603c020fe48c2:"custom_query",field_603c04b6e48c4:"apply_result_to",field_603c076293de1:"value",field_603c0660e48c6:"action_type",field_6042296de9935:"filter"}},wp_data_update_other_examples:function(e,t){var n=this.jquery,a=JSON.parse(e.attributes.attributes["data-wp-data"]);n.each(a,(function(n,o){"acf[field_60423db0a7b8a]"==o.name&&(a[n].value=t,e.attributes.attributes["data-wp-data"]=JSON.stringify(a))}))},wp_date_get_example_from_others:function(e){var t=this,n=this.jquery,a="none";return n.each(this.wp_data_get_els_by_query(e),(function(e,n){var o=t.wp_data_get_formated_data_from_acf_attr(n);"none"!=o.example&&(a=o.example)})),a},wp_data_get_els_by_query:function(e){var t=this,n=this.jquery,a=[];return n.each(this.editor.getComponents().models,(function(n,o){if(o.attributes.attributes["data-wp-data"]){var s=t.wp_data_get_formated_data_from_acf_attr(o);"current"==e&&"current"==s.query_from&&(a[a.length]=o)}})),a}}},"999c":function(e,t,n){var a={"./text/text.config.js":"6641","./wrap/wrap.config.js":"73e4"};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=s,e.exports=o,o.id="999c"},"9c24":function(e,t,n){"use strict";n("9360")},"9c8f":function(e,t,n){},aa2d:function(e,t,n){},ac36:function(e,t,n){},afe4:function(e,t,n){},b143:function(e,t,n){},b1da:function(e,t,n){},c082:function(e,t,n){"use strict";n("dcf7")},c43d:function(e,t,n){},cd21:function(e,t,n){"use strict";n("9c8f")},dcf7:function(e,t,n){},e0d7:function(e,t,n){"use strict";n("0e0d")},ec9c:function(e,t,n){},f052:function(e,t,n){},f211:function(e,t,n){},fe82:function(e,t,n){"use strict";n("5900")}});
//# sourceMappingURL=app.js.map